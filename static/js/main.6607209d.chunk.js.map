{"version":3,"sources":["const.ts","services/token.ts","services/api.ts","types/actions.ts","store/actions.ts","store/root-reducer.ts","store/films/films.ts","store/app/app.ts","store/reviews/reviews.ts","store/user/user.ts","store/favorites/favorites.ts","store/film/film.ts","store/promo/promo.ts","store/similar-films/similar-films.ts","store/promo/selectors.ts","store/favorites/api-actions.ts","store/film/selectors.ts","store/user/selectors.ts","components/controls/controls.tsx","components/promo/promo.tsx","components/video-player/video-player.tsx","components/card/card.tsx","hooks/use-playing-video.ts","components/films/films.tsx","components/logo/logo.tsx","components/footer/footer.tsx","store/app/selectors.ts","components/genres/genres.tsx","components/user-menu/user-menu.tsx","store/user/api-actions.ts","components/header/header.tsx","components/show-more/show-more.tsx","pages/loading-screen/loading-screen.tsx","pages/error-screen/error-screen.tsx","store/films/selectors.ts","pages/main-screen/main-screen.tsx","store/promo/api-actions.ts","components/scroll-to-top/scroll-to-top.tsx","components/sign-in/sign-in.tsx","pages/sign-in-screen/sign-in-screen.tsx","store/favorites/selectors.ts","pages/my-list-screen/my-list-screen.tsx","utils.ts","components/overview/overview.tsx","components/details/details.tsx","components/review/review.tsx","store/reviews/selectors.ts","components/reviews/reviews.tsx","store/reviews/api-actions.ts","components/tabs/tabs.tsx","store/similar-films/selectors.ts","pages/movie-screen/movie-screen.tsx","store/film/api-actions.ts","store/similar-films/api-actions.ts","components/breadcrumbs/breadcrumbs.tsx","components/rating/rating.tsx","components/comment-form/comment-form.tsx","pages/add-review-screen/add-review-screen.tsx","components/progress/progress.tsx","components/reload/reload.tsx","pages/player-screen/player-screen.tsx","components/private-route/private-route.tsx","components/app/app.tsx","browser-history.ts","store/middlewares/redirect.ts","index.tsx","store/films/api-actions.ts","pages/error-screen/error-screen.module.scss","components/reviews/reviews.module.scss","pages/movie-screen/movie-screen.module.scss","pages/my-list-screen/my-list-screen.module.scss","pages/player-screen/player-screen.module.scss","components/card/card.module.scss","pages/loading-screen/loading-screen.module.scss","components/sign-in/sign-in.module.scss","components/tabs/tabs.module.scss","components/comment-form/comment-form.module.scss","components/progress/progress.module.scss"],"names":["AppRoute","AuthorizationStatus","APIRoute","FavoriteStatus","DEFAULT_GENRE","MAX_VIDEO_PROGRESS","ERROR_404","OTHER_ERRORS","ANOTHER_TIME_ERROR","TRY_AGAIN_ERROR","HttpCode","AUTH_TOKEN_KEY_NAME","saveToken","token","localStorage","setItem","ActionTypes","NameSpace","changeActiveGenre","createAction","ChangeActiveGenre","loadFilmsRequest","LoadFilmsRequest","loadFilmsSuccess","LoadFilmsSuccess","loadFilmsError","LoadFilmsError","loadFilmRequest","LoadFilmRequest","loadFilmSuccess","LoadFilmSuccess","loadFilmError","LoadFilmError","loadPromoRequest","LoadPromoRequest","loadPromoSuccess","LoadPromoSuccess","loadPromoError","LoadPromoError","loadSimilarRequest","LoadSimilarRequest","loadSimilarSuccess","LoadSimilarSuccess","loadSimilarError","LoadSimilarError","loadReviewsRequest","LoadReviewsRequest","loadReviewsSuccess","LoadReviewsSuccess","loadReviewsError","LoadReviewsError","sendReviewRequest","SendReviewRequest","incrementLimit","IncrementLimit","resetLimit","ResetLimit","requireAuthorization","authorizationRequest","AuthorizationRequest","checkAuthRequest","CheckAuthRequest","requireLogout","redirectToRoute","RedirectToRoute","loadUser","LoadUser","changeFavoriteStatus","ChangeFavoriteStatus","loadMyListRequest","LoadMyListRequest","loadMyListSuccess","LoadMyListSuccess","loadMyListError","LoadMyListError","films","createReducer","isFilmsLoading","isFilmsError","builder","addCase","state","action","payload","initialState","activeGenre","limit","app","reviews","isReviewsLoading","isReviewsError","isSendReviewLoading","user","authorizationStatus","Unknown","isAuthLoading","isCheckAuthLoading","NoAuth","favorites","myList","isMyListLoading","isMyListError","film","isFilmLoading","filmError","id","isFavorite","promo","isPromoLoading","isPromoError","similarFilms","similar","isSimilarLoading","isSimilarError","rootReducer","combineReducers","Films","Film","Promo","SimilarFilms","Favorites","Reviews","App","User","getPromo","getLoadingPromoStatus","getErrorPromoStatus","fetchFavoriteStatusAction","status","dispatch","_","api","a","post","Favorite","data","normalizedFilm","camelcaseKeys","toast","error","getFilm","getLoadingFilmStatus","getErrorFilmStatus","getUser","getAuthorizationStatus","getLoadinAuthStatus","getCheckAuthStatus","Controls","hasReviewControl","useSelector","useParams","currentId","toString","currentFavoriteStatus","useDispatch","history","useHistory","isVisibleReviewControl","Auth","className","type","onClick","evt","preventDefault","push","viewBox","width","height","xlinkHref","Off","On","to","memo","children","src","backgroundImage","alt","name","posterImage","genre","released","VideoPlayer","ref","videoSrc","posterSrc","poster","muted","loop","forwardRef","Card","hasPlayer","videoRef","useRef","timeRef","video","timer","useState","isPlaying","setIsPlaying","useEffect","current","setTimeout","play","load","clearTimeout","usePlayingVideo","handlePlayVideo","handleStopVideo","linkClasses","cn","styles","link","onMouseEnter","onMouseLeave","videoLink","previewImage","map","Logo","onMain","getInnerContent","Root","Footer","getActiveGenre","Genres","genres","genreClasses","href","handleGenreClick","UserMenu","MyList","avatarUrl","delete","Logout","removeItem","Login","Header","isVisibleUserMenu","headerClasses","ShowMore","LoadingScreen","wrap","color","ErrorScreen","header","text","window","location","reload","getFilms","getLoadingFilmsStatus","getErrorFilmsStatus","getGenres","createSelector","Set","length","getFilteredFilms","filter","getRenderedFilms","filteredFilms","slice","getCurrentFilm","_state","find","MainScreen","renderedFilms","isShowMoreVisible","get","normalizedData","ScrollToTop","pathname","useLocation","scrollTo","formFields","email","password","SignIn","value","regex","errorText","formState","setFormState","formFieldsKeys","Object","keys","currentError","hasError","some","isEmptyField","isDisabledSend","btnClasses","btnDisabled","handleChange","target","isValidField","test","onSubmit","login","rest","normalizedUser","loginAction","noValidate","entries","label","fieldClasses","placeholder","onChange","htmlFor","disabled","SignInScreen","getMyList","getLoadingMyListStatus","getErrorMyListStatus","MyListScreen","normalizedFilms","titleClasses","title","isAuthorizedUser","noContentWrap","getTimeFromMins","mins","hours","Math","trunc","minutes","getTimeFromSecs","secs","floor","hs","seconds","displayedHours","padStart","displayedMinutes","displayedSeconds","Overview","rating","currentFilm","scoresCount","description","director","starring","join","Details","actor","i","actors","runTime","Review","date","review","comment","dateTime","Date","toLocaleString","year","month","day","getReviews","getLoadingReviewsStatus","getErrorReviewsStatus","getLoadingSendReviewStatus","middleReviews","round","fetchReviewsAction","reviewsWrap","reviewsText","Tabs","tabs","active","setActive","tabClasses","tab","resetButton","getSimilar","getLoadingSimilarStatus","getErrorSimilarStatus","MovieScreen","getState","FILM","fetchFilmAction","SIMILAR_FILMS","fetchSimilarAction","similarWrap","similarText","Breadcrumbs","filmName","Rating","checked","ratings","Array","from","reverse","CommentForm","setComment","setRating","isDisabledForm","handleRatingChange","useCallback","ratingQuantity","formClasses","fetchSendReviewAction","item","AddReviewScreen","Progress","progress","time","onChangeProgress","onChangeTime","isLoadedMetaData","toggleRef","wrapRef","progressClasses","max","currentTarget","leftOffset","getBoundingClientRect","left","fullWidth","offsetWidth","currentProgress","clientX","currentTime","duration","reverseTime","formattedTime","setTime","style","onMouseDown","shiftX","onMouseMove","e","wrapLeftOffset","newLeft","rightEdge","currentPosition","document","addEventListener","onMouseUp","removeEventListener","Reload","xmlns","d","fill","PlayerScreen","isLoading","setIsLoading","setIsLoadedMetaData","isEnded","setIsEnded","setProgress","pause","handlePlaying","handleChangeProgress","handleChangeTime","isVisibleLoader","loaderWrap","visible","onWaiting","onPlaying","onCanPlay","onTimeUpdate","onLoadedMetadata","onLoadedData","onEnded","onPlay","onPause","goBack","requestFullscreen","PrivateRoute","exact","path","render","AddReview","Player","browserHistory","createBrowserHistory","redirect","_store","next","onUnauthorized","axios","create","baseURL","timeout","interceptors","response","use","Unauthorized","Promise","reject","NotFound","request","config","getItem","getToken","headers","createAPI","store","configureStore","reducer","middleware","getDefaultMiddleware","thunk","extraArgument","concat","info","position","theme","ReactDOM","StrictMode","getElementById","module","exports"],"mappings":"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","file":"static/js/main.6607209d.chunk.js","sourcesContent":["export const DEFAULT_GENRE = 'All genres';\nexport const SHOWN_COUNT_FILMS = 8;\nexport const MAX_NUMBER_GENRES = 10;\nexport const MAX_VIDEO_PROGRESS = 100;\n\nexport const ERROR_404 = 404;\nexport const ERROR_401 = 401;\nexport const OTHER_ERRORS = 'OTHER';\nexport const ANOTHER_TIME_ERROR =\n  'Oops... Something went wrong. Try another time';\nexport const TRY_AGAIN_ERROR = 'Oops... Something went wrong. Try again';\nexport const AUTH_INFO = 'Hello friend! Don\\'t forget log in to the system!';\nexport const AUTH_ERROR = 'Login required!';\nexport const PROMO_ERROR = 'Failed to upload promo movie. Try another time';\n\nexport const SUCCESS_RESPONSE_CODE = 200;\nexport const NO_CONTENT_RESPONSE_CODE = 204;\n\nexport enum AppRoute {\n  Login = '/login',\n  MyList = '/mylist',\n  Film = '/films/:id',\n  AddReview = '/films/:id/review',\n  Player = '/player/:id',\n  Root = '/',\n}\n\nexport enum AuthorizationStatus {\n  Auth = 'AUTH',\n  NoAuth = 'NO_AUTH',\n  Unknown = 'UNKNOWN',\n}\n\nexport enum APIRoute {\n  Films = '/films',\n  Promo = '/promo',\n  Favorite = '/favorite',\n  Reviews = '/comments',\n  Login = '/login',\n  Logout = '/logout',\n}\n\nexport enum FavoriteStatus {\n  On = 1,\n  Off = 0\n}\n","const AUTH_TOKEN_KEY_NAME = 'user-token';\n\nexport type Token = string;\n\nexport const getToken = (): Token => {\n  const token = localStorage.getItem(AUTH_TOKEN_KEY_NAME);\n  return token ?? '';\n};\n\nexport const saveToken = (token: Token): void => {\n  localStorage.setItem(AUTH_TOKEN_KEY_NAME, token);\n};\n\nexport const dropToken = (): void => {\n  localStorage.removeItem(AUTH_TOKEN_KEY_NAME);\n};\n","import axios, {\n  AxiosInstance,\n  AxiosRequestConfig,\n  AxiosResponse,\n  AxiosError\n} from 'axios';\nimport { ERROR_401, ERROR_404 } from '../const';\nimport { getToken } from './token';\n\nconst BACKEND_URL = 'https://8.react.pages.academy/wtw';\nconst REQUEST_TIMEOUT = 5000;\n\nenum HttpCode {\n  Unauthorized = ERROR_401,\n  NotFound = ERROR_404,\n}\n\ntype UnauthorizedCallback = () => void;\n\nexport const createAPI = (\n  onUnauthorized: UnauthorizedCallback,\n): AxiosInstance => {\n  const api = axios.create({\n    baseURL: BACKEND_URL,\n    timeout: REQUEST_TIMEOUT,\n  });\n\n  api.interceptors.response.use(\n    (response: AxiosResponse) => response,\n\n    (error: AxiosError) => {\n      const { response } = error;\n\n      if (response?.status === HttpCode.Unauthorized) {\n        onUnauthorized();\n        return Promise.reject(HttpCode.Unauthorized);\n      }\n\n      if (response?.status === HttpCode.NotFound) {\n        return Promise.reject(HttpCode.NotFound);\n      }\n\n      return Promise.reject(error);\n    },\n  );\n\n  api.interceptors.request.use((config: AxiosRequestConfig) => {\n    const token = getToken();\n\n    if (token) {\n      config.headers['x-token'] = token;\n    }\n\n    return config;\n  });\n\n  return api;\n};\n","import { Action } from 'redux';\nimport { ThunkAction } from 'redux-thunk';\nimport { AxiosInstance } from 'axios';\nimport { State } from '../types/state';\n\n\nexport enum ActionTypes {\n  ChangeActiveGenre = 'films/changeGenre',\n  IncrementLimit = 'films/incrementLimit',\n  ResetLimit = 'films/resetLimit',\n  LoadFilmsRequest = 'data/loadFilmsRequest',\n  LoadFilmsSuccess = 'data/loadFilmsSuccess',\n  LoadFilmsError = 'data/loadFilmsError',\n  LoadFilmRequest = 'data/loadFilmRequest',\n  LoadFilmSuccess = 'data/loadFilmSuccess',\n  LoadFilmError = 'data/loadFilmError',\n  LoadPromoRequest = 'data/loadPromoRequest',\n  LoadPromoSuccess = 'data/loadPromoSuccess',\n  LoadPromoError = 'data/loadPromoError',\n  LoadSimilarRequest = 'data/loadSimilarRequest',\n  LoadSimilarSuccess = 'data/loadSimilarSuccess',\n  LoadSimilarError = 'data/loadSimilarError',\n  LoadReviewsRequest = 'data/loadReviewsRequest',\n  LoadReviewsSuccess = 'data/loadReviewsSuccess',\n  LoadReviewsError = 'data/loadReviewsError',\n  SendReviewRequest = 'data/sendReviewRequest',\n  requireAuthorization = 'user/requireAuthorization',\n  requireLogout = 'user/requireLogout',\n  AuthorizationRequest = 'data/authorizationRequest',\n  RedirectToRoute = 'route/redirectToRoute',\n  LoadUser = 'data/loadUser',\n  ChangeFavoriteStatus = 'data/changeFavoriteStatus',\n  LoadMyListRequest = 'data/loadMyListRequest',\n  LoadMyListSuccess = 'data/loadMyListSuccess',\n  LoadMyListError = 'data/loadMyListError',\n  CheckAuthRequest = 'data/checkAuthRequest'\n}\n\nexport type ThunkActionResult<R = Promise<void>> = ThunkAction<\n  R,\n  State,\n  AxiosInstance,\n  Action\n>;\n","import { createAction } from '@reduxjs/toolkit';\nimport { ActionTypes } from '../types/actions';\nimport { FilmsType, FilmType } from '../types/films';\nimport { AuthorizationStatus } from '../const';\nimport { ReviewsType } from '../types/reviews';\nimport { AuthUser } from '../types/auth-data';\n\nexport const changeActiveGenre = createAction<string>(ActionTypes.ChangeActiveGenre);\nexport const loadFilmsRequest = createAction<boolean>(ActionTypes.LoadFilmsRequest);\nexport const loadFilmsSuccess = createAction<FilmsType>(ActionTypes.LoadFilmsSuccess);\nexport const loadFilmsError = createAction(ActionTypes.LoadFilmsError);\nexport const loadFilmRequest = createAction<boolean>(ActionTypes.LoadFilmRequest);\nexport const loadFilmSuccess = createAction<FilmType>(ActionTypes.LoadFilmSuccess);\nexport const loadFilmError = createAction<string>(ActionTypes.LoadFilmError);\nexport const loadPromoRequest = createAction<boolean>(ActionTypes.LoadPromoRequest);\nexport const loadPromoSuccess = createAction<FilmType>(ActionTypes.LoadPromoSuccess);\nexport const loadPromoError = createAction<boolean>(ActionTypes.LoadPromoError);\nexport const loadSimilarRequest = createAction<boolean>(ActionTypes.LoadSimilarRequest);\nexport const loadSimilarSuccess = createAction<FilmsType>(ActionTypes.LoadSimilarSuccess);\nexport const loadSimilarError = createAction<boolean>(ActionTypes.LoadSimilarError);\nexport const loadReviewsRequest = createAction<boolean>(ActionTypes.LoadReviewsRequest);\nexport const loadReviewsSuccess = createAction<ReviewsType>(ActionTypes.LoadReviewsSuccess);\nexport const loadReviewsError = createAction<boolean>(ActionTypes.LoadReviewsError);\nexport const sendReviewRequest = createAction<boolean>(ActionTypes.SendReviewRequest);\nexport const incrementLimit = createAction<number>(ActionTypes.IncrementLimit);\nexport const resetLimit = createAction(ActionTypes.ResetLimit);\nexport const requireAuthorization = createAction<AuthorizationStatus>(\n  ActionTypes.requireAuthorization,\n);\nexport const authorizationRequest = createAction<boolean>(\n  ActionTypes.AuthorizationRequest,\n);\nexport const checkAuthRequest = createAction<boolean>(\n  ActionTypes.CheckAuthRequest,\n);\nexport const requireLogout = createAction(ActionTypes.requireLogout);\nexport const redirectToRoute = createAction<string>(ActionTypes.RedirectToRoute);\nexport const loadUser = createAction<AuthUser>(ActionTypes.LoadUser);\nexport const changeFavoriteStatus = createAction<FilmType>(ActionTypes.ChangeFavoriteStatus);\nexport const loadMyListRequest = createAction<boolean>(ActionTypes.LoadMyListRequest);\nexport const loadMyListSuccess = createAction<FilmsType>(ActionTypes.LoadMyListSuccess);\nexport const loadMyListError = createAction<boolean>(ActionTypes.LoadMyListError);\n","import { combineReducers } from 'redux';\nimport { films } from './films/films';\nimport { app } from './app/app';\nimport { reviews } from './reviews/reviews';\nimport { user } from './user/user';\nimport { favorites } from './favorites/favorites';\nimport { film } from './film/film';\nimport { promo } from './promo/promo';\nimport { similarFilms } from './similar-films/similar-films';\n\nexport enum NameSpace {\n  Films = 'FILMS',\n  Film = 'FILM',\n  Promo = 'PROMO',\n  SimilarFilms = 'SIMILAR_FILMS',\n  Favorites = 'FAVORITES',\n  Reviews = 'REVIEWS',\n  App = 'APP',\n  User = 'USER',\n}\n\nexport const rootReducer = combineReducers({\n  [NameSpace.Films]: films,\n  [NameSpace.Film]: film,\n  [NameSpace.Promo]: promo,\n  [NameSpace.SimilarFilms]: similarFilms,\n  [NameSpace.Favorites]: favorites,\n  [NameSpace.Reviews]: reviews,\n  [NameSpace.App]: app,\n  [NameSpace.User]: user,\n});\n\nexport type RootState = ReturnType<typeof rootReducer>;\n","import { createReducer } from '@reduxjs/toolkit';\nimport { FilmsData } from '../../types/state';\nimport {\n  loadFilmsError,\n  loadFilmsRequest,\n  loadFilmsSuccess\n} from '../actions';\n\nconst initialState: FilmsData = {\n  films: [],\n  isFilmsLoading: false,\n  isFilmsError: false,\n};\n\nconst films = createReducer(initialState, (builder) => {\n  builder\n    .addCase(loadFilmsRequest, (state, action) => {\n      state.isFilmsLoading = action.payload;\n    })\n    .addCase(loadFilmsSuccess, (state, action) => {\n      state.films = action.payload;\n    })\n    .addCase(loadFilmsError, (state) => {\n      state.isFilmsError = true;\n    });\n});\n\nexport { films };\n","import { DEFAULT_GENRE, SHOWN_COUNT_FILMS } from '../../const';\nimport { AppProcess } from '../../types/state';\nimport { createReducer } from '@reduxjs/toolkit';\nimport { changeActiveGenre, incrementLimit, resetLimit } from '../actions';\n\nconst initialState: AppProcess = {\n  activeGenre: DEFAULT_GENRE,\n  limit: SHOWN_COUNT_FILMS,\n};\n\nconst app = createReducer(initialState, (builder) => {\n  builder\n    .addCase(changeActiveGenre, (state, action) => {\n      state.activeGenre = action.payload;\n    })\n    .addCase(incrementLimit, (state, action) => {\n      state.limit = state.limit + action.payload;\n    })\n    .addCase(resetLimit, (state) => {\n      state.limit = initialState.limit;\n    });\n});\n\nexport { app };\n","import { createReducer } from '@reduxjs/toolkit';\nimport { ReviewsData } from '../../types/state';\nimport {\n  loadReviewsError,\n  loadReviewsRequest,\n  loadReviewsSuccess,\n  sendReviewRequest\n} from '../actions';\n\nconst initialState: ReviewsData = {\n  reviews: [],\n  isReviewsLoading: false,\n  isReviewsError: false,\n  isSendReviewLoading: false,\n};\n\nconst reviews = createReducer(initialState, (builder) => {\n  builder\n    .addCase(loadReviewsRequest, (state, action) => {\n      state.isReviewsLoading = action.payload;\n    })\n    .addCase(loadReviewsSuccess, (state, action) => {\n      state.reviews = action.payload;\n    })\n    .addCase(loadReviewsError, (state, action) => {\n      state.isReviewsError = action.payload;\n    })\n    .addCase(sendReviewRequest, (state, action) => {\n      state.isSendReviewLoading = action.payload;\n    });\n});\n\nexport { reviews };\n","import { AuthorizationStatus } from '../../const';\nimport { AuthUser } from '../../types/auth-data';\nimport { UserProcess } from '../../types/state';\nimport { createReducer } from '@reduxjs/toolkit';\nimport {\n  authorizationRequest,\n  checkAuthRequest,\n  loadUser,\n  requireAuthorization,\n  requireLogout\n} from '../actions';\n\nconst initialState: UserProcess = {\n  user: {} as AuthUser,\n  authorizationStatus: AuthorizationStatus.Unknown,\n  isAuthLoading: false,\n  isCheckAuthLoading: false,\n};\n\nconst user = createReducer(initialState, (builder) => {\n  builder\n    .addCase(loadUser, (state, action) => {\n      state.user = action.payload;\n    })\n    .addCase(requireAuthorization, (state, action) => {\n      state.authorizationStatus = action.payload;\n    })\n    .addCase(requireLogout, (state) => {\n      state.authorizationStatus = AuthorizationStatus.NoAuth;\n    })\n    .addCase(authorizationRequest, (state, action) => {\n      state.isAuthLoading = action.payload;\n    })\n    .addCase(checkAuthRequest, (state, action) => {\n      state.isCheckAuthLoading = action.payload;\n    });\n});\n\nexport { user };\n","import { createReducer } from '@reduxjs/toolkit';\nimport { Favorites } from '../../types/state';\nimport { loadMyListError, loadMyListRequest, loadMyListSuccess } from '../actions';\n\nconst initialState: Favorites = {\n  myList: [],\n  isMyListLoading: false,\n  isMyListError: false,\n};\n\nconst favorites = createReducer(initialState, (builder) => {\n  builder\n    .addCase(loadMyListRequest, (state, action) => {\n      state.isMyListLoading = action.payload;\n    })\n    .addCase(loadMyListSuccess, (state, action) => {\n      state.myList = action.payload;\n    })\n    .addCase(loadMyListError, (state, action) => {\n      state.isMyListError = action.payload;\n    });\n});\n\nexport { favorites };\n\n","import { createReducer } from '@reduxjs/toolkit';\nimport { FilmType } from '../../types/films';\nimport { FilmData } from '../../types/state';\nimport { changeFavoriteStatus, loadFilmError, loadFilmRequest, loadFilmSuccess } from '../actions';\n\nconst initialState: FilmData = {\n  film: {} as FilmType,\n  isFilmLoading: false,\n  filmError: '',\n};\n\nconst film = createReducer(initialState, (builder) => {\n  builder\n    .addCase(loadFilmRequest, (state, action) => {\n      state.isFilmLoading = action.payload;\n    })\n    .addCase(loadFilmSuccess, (state, action) => {\n      state.film = action.payload;\n    })\n    .addCase(loadFilmError, (state, action) => {\n      state.filmError = action.payload;\n    })\n    .addCase(changeFavoriteStatus, (state, { payload: { id, isFavorite } }) => {\n      if (state.film.id === id) {\n        state.film = { ...state.film, isFavorite };\n      }\n    });\n});\n\nexport { film };\n","import { createReducer } from '@reduxjs/toolkit';\nimport { FilmType } from '../../types/films';\nimport { Promo } from '../../types/state';\nimport {\n  changeFavoriteStatus,\n  loadPromoError,\n  loadPromoRequest,\n  loadPromoSuccess\n} from '../actions';\n\nconst initialState: Promo = {\n  promo: {} as FilmType,\n  isPromoLoading: false,\n  isPromoError: false,\n};\n\nconst promo = createReducer(initialState, (builder) => {\n  builder\n    .addCase(loadPromoRequest, (state, action) => {\n      state.isPromoLoading = action.payload;\n    })\n    .addCase(loadPromoSuccess, (state, action) => {\n      state.promo = action.payload;\n    })\n    .addCase(loadPromoError, (state, action) => {\n      state.isPromoError = action.payload;\n    })\n    .addCase(changeFavoriteStatus, (state, { payload: { id, isFavorite } }) => {\n      if (state.promo.id === id) {\n        state.promo = { ...state.promo, isFavorite };\n      }\n    });\n});\n\nexport { promo };\n","import { createReducer } from '@reduxjs/toolkit';\nimport { SimilarFilms } from '../../types/state';\nimport { loadSimilarError, loadSimilarRequest, loadSimilarSuccess } from '../actions';\n\nconst initialState: SimilarFilms = {\n  similar: [],\n  isSimilarLoading: false,\n  isSimilarError: false,\n};\n\nconst similarFilms = createReducer(initialState, (builder) => {\n  builder\n    .addCase(loadSimilarRequest, (state, action) => {\n      state.isSimilarLoading = action.payload;\n    })\n    .addCase(loadSimilarSuccess, (state, action) => {\n      state.similar = action.payload;\n    })\n    .addCase(loadSimilarError, (state, action) => {\n      state.isSimilarError = action.payload;\n    });\n});\n\n\nexport { similarFilms };\n","import { FilmType } from '../../types/films';\nimport { State } from '../../types/state';\nimport { NameSpace } from '../root-reducer';\n\nexport const getPromo = (state: State): FilmType =>\n  state[NameSpace.Promo].promo;\n\nexport const getLoadingPromoStatus = (state: State): boolean =>\n  state[NameSpace.Promo].isPromoLoading;\n\nexport const getErrorPromoStatus = (state: State): boolean =>\n  state[NameSpace.Promo].isPromoError;\n","import { ThunkActionResult } from '../../types/actions';\nimport {\n  changeFavoriteStatus,\n  loadMyListRequest,\n  loadMyListError,\n  loadMyListSuccess\n} from '../actions';\nimport {\n  APIRoute,\n  TRY_AGAIN_ERROR,\n  FavoriteStatus,\n  ERROR_401,\n  AUTH_ERROR\n} from '../../const';\nimport { FilmsType, FilmType } from '../../types/films';\nimport camelcaseKeys from 'camelcase-keys';\nimport { toast } from 'react-toastify';\n\nexport const fetchMyListAction = (): ThunkActionResult => async (\n  dispatch,\n  _,\n  api,\n) => {\n  dispatch(loadMyListRequest(true));\n\n  try {\n    const { data } = await api.get<FilmsType>(`${APIRoute.Favorite}`);\n    const normalizedFilms = camelcaseKeys(data);\n    dispatch(loadMyListSuccess(normalizedFilms));\n  } catch (e) {\n    dispatch(loadMyListError(true));\n  } finally {\n    dispatch(loadMyListRequest(false));\n  }\n};\n\nexport const fetchFavoriteStatusAction = (\n  id: string,\n  status: FavoriteStatus,\n): ThunkActionResult => async (dispatch, _, api) => {\n  try {\n    const { data } = await api.post<FilmType>(\n      `${APIRoute.Favorite}/${id}/${status}`,\n    );\n    const normalizedFilm = camelcaseKeys(data);\n\n    dispatch(changeFavoriteStatus(normalizedFilm));\n  } catch (e) {\n    e === ERROR_401 ? toast.error(AUTH_ERROR) : toast.error(TRY_AGAIN_ERROR);\n  }\n};\n","import { FilmType } from '../../types/films';\nimport { State } from '../../types/state';\nimport { NameSpace } from '../root-reducer';\n\nexport const getFilm = (state: State): FilmType => state[NameSpace.Film].film;\n\nexport const getLoadingFilmStatus = (state: State): boolean =>\n  state[NameSpace.Film].isFilmLoading;\n\nexport const getErrorFilmStatus = (state: State): string =>\n  state[NameSpace.Film].filmError;\n","import { NameSpace } from '../root-reducer';\nimport { State } from '../../types/state';\nimport { AuthUser } from '../../types/auth-data';\nimport { AuthorizationStatus } from '../../const';\n\nexport const getUser = (state: State): AuthUser => state[NameSpace.User].user;\n\nexport const getAuthorizationStatus = (state: State): AuthorizationStatus =>\n  state[NameSpace.User].authorizationStatus;\n\nexport const getLoadinAuthStatus = (state: State): boolean =>\n  state[NameSpace.User].isAuthLoading;\n\nexport const getCheckAuthStatus = (state: State): boolean =>\n  state[NameSpace.User].isCheckAuthLoading;\n","import { memo, MouseEvent } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { Link, useHistory, useParams } from 'react-router-dom';\nimport { AuthorizationStatus, FavoriteStatus } from '../../const';\nimport { fetchFavoriteStatusAction } from '../../store/favorites/api-actions';\nimport { getFilm } from '../../store/film/selectors';\nimport { getPromo } from '../../store/promo/selectors';\nimport { getAuthorizationStatus } from '../../store/user/selectors';\n\ntype ControlsProps = {\n  hasReviewControl?: boolean;\n};\n\nfunction Controls({ hasReviewControl = false }: ControlsProps): JSX.Element {\n  const authorizationStatus = useSelector(getAuthorizationStatus);\n  const promo = useSelector(getPromo);\n  const film = useSelector(getFilm);\n\n  const { id }: { id: string } = useParams();\n  const currentId = id || promo.id?.toString();\n  const currentFavoriteStatus = id ? film.isFavorite : promo.isFavorite;\n\n  const dispatch = useDispatch();\n  const history = useHistory();\n\n  const handlePlayClick = (evt: MouseEvent<HTMLButtonElement>) => {\n    evt.preventDefault();\n\n    history.push(`/player/${currentId}`);\n  };\n\n  const handleMyListClick = (evt: MouseEvent<HTMLButtonElement>) => {\n    evt.preventDefault();\n    currentFavoriteStatus\n      ? dispatch(fetchFavoriteStatusAction(currentId, FavoriteStatus.Off))\n      : dispatch(fetchFavoriteStatusAction(currentId, FavoriteStatus.On));\n  };\n\n  const isVisibleReviewControl =\n    hasReviewControl && authorizationStatus === AuthorizationStatus.Auth;\n\n  return (\n    <div className=\"film-card__buttons\">\n      <button\n        className=\"btn btn--play film-card__button\"\n        type=\"button\"\n        onClick={handlePlayClick}\n      >\n        <svg viewBox=\"0 0 19 19\" width=\"19\" height=\"19\">\n          <use xlinkHref=\"#play-s\" />\n        </svg>\n        <span>Play</span>\n      </button>\n      <button\n        className=\"btn btn--list film-card__button\"\n        type=\"button\"\n        onClick={handleMyListClick}\n      >\n        {currentFavoriteStatus ? (\n          <svg viewBox=\"0 0 18 14\" width=\"18\" height=\"14\">\n            <use xlinkHref=\"#in-list\" data-testid=\"in-list\" />\n          </svg>\n        ) : (\n          <svg viewBox=\"0 0 19 20\" width=\"19\" height=\"20\">\n            <use xlinkHref=\"#add\" data-testid=\"add\" />\n          </svg>\n        )}\n        <span>My list</span>\n      </button>\n      {isVisibleReviewControl && (\n        <Link to={`/films/${id}/review`} className=\"btn film-card__button\">\n          Add review\n        </Link>\n      )}\n    </div>\n  );\n}\n\nexport default memo(Controls);\n","import { useSelector } from 'react-redux';\nimport { getErrorPromoStatus, getPromo } from '../../store/promo/selectors';\nimport Controls from '../controls/controls';\n\ntype PromoFilm = {\n  children?: JSX.Element;\n};\n\nfunction Promo({ children }: PromoFilm): JSX.Element {\n  const promo = useSelector(getPromo);\n  const isPromoError = useSelector(getErrorPromoStatus);\n\n  if (isPromoError) {\n    return (\n      <section className=\"film-card\">\n        <div className=\"film-card__bg\"></div>\n        <h1 className=\"visually-hidden\">WTW</h1>\n        {children}\n      </section>\n    );\n  }\n\n  return (\n    <section className=\"film-card\">\n      <div className=\"film-card__bg\">\n        <img src={promo.backgroundImage} alt={promo.name} />\n      </div>\n      <h1 className=\"visually-hidden\">WTW</h1>\n      {children}\n      <div className=\"film-card__wrap\">\n        <div className=\"film-card__info\">\n          <div className=\"film-card__poster\">\n            <img\n              src={promo.posterImage}\n              alt={promo.name}\n              width=\"218\"\n              height=\"327\"\n            />\n          </div>\n          <div className=\"film-card__desc\">\n            <h2 className=\"film-card__title\">{promo.name}</h2>\n            <p className=\"film-card__meta\">\n              <span className=\"film-card__genre\">{promo.genre}</span>\n              <span className=\"film-card__year\">{promo.released}</span>\n            </p>\n            <Controls />\n          </div>\n        </div>\n      </div>\n    </section>\n  );\n}\n\nexport default Promo;\n","import { forwardRef, ForwardedRef } from 'react';\n\ntype VideoPlayerProps = {\n  videoSrc: string;\n  posterSrc: string;\n};\n\nfunction VideoPlayer(\n  { videoSrc, posterSrc }: VideoPlayerProps,\n  ref: ForwardedRef<HTMLVideoElement>,\n): JSX.Element {\n  return (\n    <video\n      src={videoSrc}\n      poster={posterSrc}\n      ref={ref}\n      muted\n      loop\n      width=\"280\"\n      height=\"175\"\n      data-testid=\"video-player\"\n    />\n  );\n}\n\nexport default forwardRef(VideoPlayer);\n","import { Link } from 'react-router-dom';\nimport { memo, useRef } from 'react';\nimport cn from 'classnames';\nimport { FilmType } from '../../types/films';\nimport VideoPlayer from '../video-player/video-player';\nimport styles from './card.module.scss';\nimport { usePlayingVideo } from '../../hooks/use-playing-video';\n\ntype CardProps = {\n  film: FilmType;\n  hasPlayer: boolean;\n};\n\nfunction Card({ film, hasPlayer }: CardProps): JSX.Element {\n  const videoRef = useRef<HTMLVideoElement | null>(null);\n  const timeRef = useRef<ReturnType<typeof setTimeout> | null>(null);\n\n  const [handlePlayVideo, handleStopVideo] = usePlayingVideo(videoRef, timeRef);\n  const linkClasses = cn('small-film-card catalog__films-card', styles.link);\n\n  const getPreviewElement = () => {\n    if (hasPlayer) {\n      return (\n        <VideoPlayer\n          videoSrc={film.videoLink}\n          posterSrc={film.previewImage}\n          ref={videoRef}\n        />\n      );\n    }\n\n    return <img src={film.previewImage} alt={film.name} />;\n  };\n\n  return (\n    <Link className={linkClasses} to={`/films/${film.id}`}>\n      <article onMouseEnter={handlePlayVideo} onMouseLeave={handleStopVideo}>\n        <div className=\"small-film-card__image\">{getPreviewElement()}</div>\n        <h3 className=\"small-film-card__title small-film-card__link\">\n          {film.name}\n        </h3>\n      </article>\n    </Link>\n  );\n}\n\nexport default memo(Card);\n","import { useState, useEffect, MutableRefObject } from 'react';\n\nconst TIME_VIDEO_DELAY = 1000;\n\ntype ResultPlayingVideo = [() => void, () => void];\n\nexport const usePlayingVideo = (\n  video: MutableRefObject<HTMLVideoElement | null>,\n  timer: MutableRefObject<ReturnType<typeof setTimeout> | null>,\n): ResultPlayingVideo => {\n  const [isPlaying, setIsPlaying] = useState(false);\n\n  const handlePlayVideo = () => {\n    setIsPlaying(true);\n  };\n\n  const handleStopVideo = () => {\n    setIsPlaying(false);\n  };\n\n  useEffect(() => {\n    if (video.current === null) {\n      return;\n    }\n\n    if (isPlaying) {\n      timer.current = setTimeout(() => video.current?.play(), TIME_VIDEO_DELAY);\n    } else {\n      video.current.load();\n    }\n\n    return () => {\n      timer.current && clearTimeout(timer.current);\n    };\n  }, [isPlaying, timer, video]);\n\n  return [handlePlayVideo, handleStopVideo];\n};\n","import Card from '../card/card';\nimport { FilmsType } from '../../types/films';\n\ntype FilmsProps = {\n  films: FilmsType;\n  hasPlayer: boolean;\n};\n\nfunction Films({ films, hasPlayer }: FilmsProps): JSX.Element {\n  return (\n    <div className={'catalog__films-list'}>\n      {films.map((film) => (\n        <Card film={film} key={film.id} hasPlayer={hasPlayer} />\n      ))}\n    </div>\n  );\n}\n\nexport default Films;\n","import { Link } from 'react-router-dom';\nimport { AppRoute } from '../../const';\n\ntype LogoProps = {\n  className?: string;\n  onMain: boolean;\n};\n\nfunction Logo({ className, onMain }: LogoProps): JSX.Element {\n  const getInnerContent = () => (\n    <>\n      <span className=\"logo__letter logo__letter--1\">W</span>\n      <span className=\"logo__letter logo__letter--2\">T</span>\n      <span className=\"logo__letter logo__letter--3\">W</span>\n    </>\n  );\n\n  const getLogo = () => {\n    if (onMain) {\n      return (\n        <span className={`logo__link ${className}`}>{getInnerContent()}</span>\n      );\n    }\n\n    return (\n      <Link to={AppRoute.Root} className={`logo__link ${className}`}>\n        {getInnerContent()}\n      </Link>\n    );\n  };\n\n  return <div className=\"logo\">{getLogo()}</div>;\n}\n\nexport default Logo;\n","import { memo } from 'react';\nimport Logo from '../logo/logo';\n\ntype FooterProps = {\n  onMain?: boolean;\n};\n\nfunction Footer({ onMain = false }: FooterProps): JSX.Element {\n  return (\n    <footer className=\"page-footer\">\n      <Logo onMain={onMain} className=\"logo__link--light\" />\n      <div className=\"copyright\">\n        <p> 2019 What to watch Ltd.</p>\n      </div>\n    </footer>\n  );\n}\n\nexport default memo(Footer);\n","import { NameSpace } from '../root-reducer';\nimport { State } from '../../types/state';\n\nexport const getActiveGenre = (state: State): string =>\n  state[NameSpace.App].activeGenre;\n\nexport const getLimit = (state: State): number =>\n  state[NameSpace.App].limit;\n","import { useSelector, useDispatch } from 'react-redux';\nimport { MouseEvent } from 'react';\nimport cn from 'classnames';\nimport { changeActiveGenre, resetLimit } from '../../store/actions';\nimport { getActiveGenre } from '../../store/app/selectors';\n\ntype GenresProps = {\n  genres: string[];\n};\n\nfunction Genres({ genres }: GenresProps): JSX.Element {\n  const activeGenre = useSelector(getActiveGenre);\n  const dispatch = useDispatch();\n\n  const handleGenreClick = (\n    evt: MouseEvent<HTMLAnchorElement>,\n    genre: string,\n  ) => {\n    evt.preventDefault();\n    dispatch(changeActiveGenre(genre));\n    dispatch(resetLimit());\n  };\n\n  const genreClasses = (genre: string) =>\n    cn({\n      'catalog__genres-item': true,\n      'catalog__genres-item--active': genre === activeGenre,\n    });\n\n  return (\n    <ul className=\"catalog__genres-list\">\n      {genres.map((genre) => (\n        <li\n          className={genreClasses(genre)}\n          key={genre}\n          data-testid={genre === activeGenre ? 'activeGenre' : 'genre'}\n        >\n          <a\n            href=\"/\"\n            className=\"catalog__genres-link\"\n            onClick={(evt) => handleGenreClick(evt, genre)}\n          >\n            {genre}\n          </a>\n        </li>\n      ))}\n    </ul>\n  );\n}\n\nexport default Genres;\n","import { MouseEvent } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { Link } from 'react-router-dom';\nimport { AuthorizationStatus, AppRoute } from '../../const';\nimport { logoutAction } from '../../store/user/api-actions';\nimport { getAuthorizationStatus, getUser } from '../../store/user/selectors';\n\nfunction UserMenu(): JSX.Element {\n  const authorizationStatus = useSelector(getAuthorizationStatus);\n  const user = useSelector(getUser);\n  const dispatch = useDispatch();\n\n  const handleLogoutClick = (evt: MouseEvent) => {\n    evt.preventDefault();\n    dispatch(logoutAction());\n  };\n\n  if (authorizationStatus === AuthorizationStatus.Auth) {\n    return (\n      <ul className=\"user-block\">\n        <li className=\"user-block__item\">\n          <div className=\"user-block__avatar\">\n            <Link to={AppRoute.MyList}>\n              <img\n                src={user.avatarUrl}\n                alt={`${user.name} avatar`}\n                width=\"63\"\n                height=\"63\"\n              />\n            </Link>\n          </div>\n        </li>\n        <li className=\"user-block__item\">\n          <Link\n            to={AppRoute.Root}\n            onClick={handleLogoutClick}\n            className=\"user-block__link\"\n          >\n            Sign out\n          </Link>\n        </li>\n      </ul>\n    );\n  }\n\n  return (\n    <div className=\"user-block\">\n      <Link to={AppRoute.Login} className=\"user-block__link\">\n        Sign in\n      </Link>\n    </div>\n  );\n}\n\nexport default UserMenu;\n","import { ThunkActionResult } from '../../types/actions';\nimport {\n  requireAuthorization,\n  requireLogout,\n  redirectToRoute,\n  authorizationRequest,\n  loadUser,\n  checkAuthRequest\n} from '../actions';\nimport { saveToken, dropToken } from '../../services/token';\nimport {\n  APIRoute,\n  AuthorizationStatus,\n  AppRoute,\n  TRY_AGAIN_ERROR,\n  AUTH_INFO\n} from '../../const';\nimport { AuthData } from '../../types/auth-data';\nimport camelcaseKeys from 'camelcase-keys';\nimport { toast } from 'react-toastify';\n\nexport const checkAuthAction = (): ThunkActionResult => async (\n  dispatch,\n  _,\n  api,\n) => {\n  dispatch(checkAuthRequest(true));\n\n  try {\n    const { data } = await api.get(APIRoute.Login);\n    const normalizedUser = camelcaseKeys(data);\n\n    delete normalizedUser.token;\n\n    dispatch(loadUser(normalizedUser));\n    dispatch(requireAuthorization(AuthorizationStatus.Auth));\n  } catch (e) {\n    toast.info(AUTH_INFO, { position: 'bottom-right', theme: 'dark' });\n  } finally {\n    dispatch(checkAuthRequest(false));\n  }\n};\n\nexport const loginAction = ({\n  login: email,\n  password,\n}: AuthData): ThunkActionResult => async (dispatch, _, api) => {\n  dispatch(authorizationRequest(true));\n\n  try {\n    const {\n      data: { token, ...rest },\n    } = await api.post(APIRoute.Login, {\n      email,\n      password,\n    });\n\n    const normalizedUser = camelcaseKeys(rest);\n\n    saveToken(token);\n    dispatch(loadUser(normalizedUser));\n    dispatch(requireAuthorization(AuthorizationStatus.Auth));\n    dispatch(redirectToRoute(AppRoute.Root));\n  } catch (e) {\n    toast.error(TRY_AGAIN_ERROR);\n  } finally {\n    dispatch(authorizationRequest(false));\n  }\n};\n\nexport const logoutAction = (): ThunkActionResult => async (\n  dispatch,\n  _,\n  api,\n) => {\n  try {\n    await api.delete(APIRoute.Logout);\n    dropToken();\n    dispatch(requireLogout());\n  } catch (e) {\n    toast.error(TRY_AGAIN_ERROR);\n  }\n};\n","import { memo, PropsWithChildren } from 'react';\nimport cn from 'classnames';\nimport Logo from '../logo/logo';\nimport UserMenu from '../user-menu/user-menu';\n\ntype HeaderProps = PropsWithChildren<{\n  className?: string;\n  isAuthorizedUser?: boolean;\n  isVisibleUserMenu?: boolean;\n  onMain?: boolean;\n}>;\n\nfunction Header({\n  className = '',\n  children,\n  isVisibleUserMenu = true,\n  onMain = false,\n}: HeaderProps): JSX.Element {\n  const headerClasses = cn('page-header', `${className}`);\n\n  return (\n    <header className={headerClasses}>\n      <Logo onMain={onMain} />\n      {children}\n      {isVisibleUserMenu && <UserMenu />}\n    </header>\n  );\n}\n\nexport default memo(Header);\n","import { useDispatch } from 'react-redux';\nimport { incrementLimit } from '../../store/actions';\nimport { SHOWN_COUNT_FILMS } from '../../const';\n\nfunction ShowMore(): JSX.Element {\n  const dispatch = useDispatch();\n\n  const handleShowMoreClick = () => {\n    dispatch(incrementLimit(SHOWN_COUNT_FILMS));\n  };\n\n  return (\n    <div className=\"catalog__more\">\n      <button\n        className=\"catalog__button\"\n        type=\"button\"\n        onClick={handleShowMoreClick}\n      >\n        Show more\n      </button>\n    </div>\n  );\n}\n\nexport default ShowMore;\n","import Loader from 'react-loader-spinner';\nimport styles from './loading-screen.module.scss';\n\nconst LOADER_WIDTH = 60;\nconst LOADER_HEIGHT = 60;\n\nfunction LoadingScreen(): JSX.Element {\n  return (\n    <div className={styles.wrap} data-testid=\"loading\">\n      <Loader type=\"Oval\" color=\"#eee5b5\" height={LOADER_HEIGHT} width={LOADER_WIDTH} />\n    </div>\n  );\n}\n\nexport default LoadingScreen;\n","// import {MouseEvent} from 'react';\nimport { MouseEvent } from 'react';\nimport { Link } from 'react-router-dom';\nimport cn from 'classnames';\nimport { AppRoute } from '../../const';\nimport Footer from '../../components/footer/footer';\nimport Header from '../../components/header/header';\nimport styles from './error-screen.module.scss';\n\ntype ErrorScreenProps = {\n  type?: string;\n};\n\nfunction ErrorScreen({ type = '' }: ErrorScreenProps): JSX.Element {\n  const headerClasses = cn('user-page__head', styles.header);\n\n  const refreshPage = (evt: MouseEvent) => {\n    evt.preventDefault();\n    window.location.reload();\n  };\n\n  return (\n    <div className=\"user-page\" data-testid=\"error-page\">\n      <Header className={headerClasses} isVisibleUserMenu={false}></Header>\n      <div className={styles['main-layout']}>\n        {type === '404' ? (\n          <>\n            <p className={styles.text}>404 Not Found</p>\n            <Link to={AppRoute.Root} className={styles.link}>\n              Go back to the main page\n            </Link>\n          </>\n        ) : (\n          <>\n            <p className={styles.text}>\n              Oops... Something went wrong. Try again\n            </p>\n            <Link\n              to={AppRoute.Root}\n              className={styles.link}\n              onClick={refreshPage}\n            >\n              Reload page\n            </Link>\n          </>\n        )}\n      </div>\n      <Footer />\n    </div>\n  );\n}\n\nexport default ErrorScreen;\n","import { NameSpace } from '../root-reducer';\nimport { State } from '../../types/state';\nimport { FilmsType } from '../../types/films';\nimport { DEFAULT_GENRE, MAX_NUMBER_GENRES } from '../../const';\nimport { createSelector } from '@reduxjs/toolkit';\nimport { getActiveGenre, getLimit } from '../app/selectors';\n\nexport const getFilms = (state: State): FilmsType =>\n  state[NameSpace.Films].films;\n\nexport const getLoadingFilmsStatus = (state: State): boolean =>\n  state[NameSpace.Films].isFilmsLoading;\n\nexport const getErrorFilmsStatus = (state: State): boolean =>\n  state[NameSpace.Films].isFilmsError;\n\nexport const getGenres = createSelector(getFilms, (films) => {\n  const genres = [DEFAULT_GENRE, ...new Set(films.map((film) => film.genre))];\n\n  if (genres.length > MAX_NUMBER_GENRES) {\n    genres.length = MAX_NUMBER_GENRES;\n  }\n\n  return genres;\n});\n\nexport const getFilteredFilms = createSelector(\n  [getActiveGenre, getFilms],\n  (activeGenre, films) =>\n    activeGenre === DEFAULT_GENRE\n      ? films\n      : films.filter((film) => film.genre === activeGenre),\n);\n\nexport const getRenderedFilms = createSelector(\n  [getFilteredFilms, getLimit],\n  (filteredFilms, limit) => filteredFilms.slice(0, limit),\n);\n\nexport const getCurrentFilm = createSelector(\n  [getFilms, (_state: State, id: string) => id],\n  (films, id) => films.find((film) => film.id === +id),\n);\n","import { useEffect } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport Promo from '../../components/promo/promo';\nimport Films from '../../components/films/films';\nimport Footer from '../../components/footer/footer';\nimport Genres from '../../components/genres/genres';\nimport Header from '../../components/header/header';\nimport ShowMore from '../../components/show-more/show-more';\nimport { SHOWN_COUNT_FILMS } from '../../const';\nimport { resetLimit } from '../../store/actions';\nimport LoadingScreen from '../loading-screen/loading-screen';\nimport ErrorScreen from '../error-screen/error-screen';\nimport {\n  getFilteredFilms,\n  getGenres,\n  getRenderedFilms\n} from '../../store/films/selectors';\nimport {\n  getErrorFilmsStatus,\n  getLoadingFilmsStatus\n} from '../../store/films/selectors';\nimport { getAuthorizationStatus } from '../../store/user/selectors';\nimport { getLoadingPromoStatus } from '../../store/promo/selectors';\nimport { fetchPromoAction } from '../../store/promo/api-actions';\n\nfunction MainScreen(): JSX.Element {\n  const genres = useSelector(getGenres);\n  const filteredFilms = useSelector(getFilteredFilms);\n  const renderedFilms = useSelector(getRenderedFilms);\n  const isFilmsLoading = useSelector(getLoadingFilmsStatus);\n  const isPromoLoading = useSelector(getLoadingPromoStatus);\n  const isFilmsError = useSelector(getErrorFilmsStatus);\n  const authorizationStatus = useSelector(getAuthorizationStatus);\n  const dispatch = useDispatch();\n\n  const isShowMoreVisible =\n    filteredFilms.length > SHOWN_COUNT_FILMS &&\n    filteredFilms.length !== renderedFilms.length;\n\n  useEffect(() => {\n    dispatch(fetchPromoAction());\n  }, [dispatch, authorizationStatus]);\n\n  useEffect(() => {\n    dispatch(resetLimit());\n  }, [dispatch]);\n\n  if (isFilmsLoading && isPromoLoading) {\n    return <LoadingScreen />;\n  }\n\n  if (isFilmsError) {\n    return <ErrorScreen />;\n  }\n\n  return (\n    <>\n      <Promo>\n        <Header className=\"film-card__head\" onMain />\n      </Promo>\n      <div className=\"page-content\">\n        <section className=\"catalog\">\n          <h2 className=\"catalog__title visually-hidden\">Catalog</h2>\n          <Genres genres={genres} />\n          <Films films={renderedFilms} hasPlayer />\n          {isShowMoreVisible && <ShowMore />}\n        </section>\n        <Footer onMain />\n      </div>\n    </>\n  );\n}\n\nexport default MainScreen;\n","import { ThunkActionResult } from '../../types/actions';\nimport {\n  loadPromoSuccess,\n  loadPromoError,\n  loadPromoRequest\n} from '../actions';\nimport {\n  APIRoute,\n  PROMO_ERROR\n} from '../../const';\nimport { FilmType } from '../../types/films';\nimport camelcaseKeys from 'camelcase-keys';\nimport { toast } from 'react-toastify';\n\nexport const fetchPromoAction = (): ThunkActionResult => async (\n  dispatch,\n  _,\n  api,\n) => {\n  dispatch(loadPromoRequest(true));\n\n  try {\n    const { data } = await api.get<FilmType>(`${APIRoute.Promo}`);\n    const normalizedData = camelcaseKeys(data);\n\n    dispatch(loadPromoSuccess(normalizedData));\n  } catch (e) {\n    dispatch(loadPromoError(true));\n    toast.error(PROMO_ERROR);\n  } finally {\n    dispatch(loadPromoRequest(false));\n  }\n};\n","import { useEffect } from 'react';\nimport { useLocation } from 'react-router-dom';\n\nfunction ScrollToTop (): null {\n  const { pathname } = useLocation();\n\n  useEffect(() => {\n    window.scrollTo(0, 0);\n  }, [pathname]);\n\n  return null;\n}\n\nexport default ScrollToTop;\n","import { useState, ChangeEvent, FormEvent } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport cn from 'classnames';\nimport styles from './sign-in.module.scss';\nimport Loader from 'react-loader-spinner';\nimport { getLoadinAuthStatus } from '../../store/user/selectors';\nimport { loginAction } from '../../store/user/api-actions';\n\nconst LOADER_WIDTH = 30;\nconst LOADER_HEIGHT = 30;\n\nconst formFields = {\n  email: 'Email address',\n  password: 'Password',\n};\n\ntype formFieldProps = {\n  value: string;\n  error: boolean;\n  regex: RegExp;\n  errorText: string;\n};\n\ntype FormStateProps = {\n  [key: string]: formFieldProps;\n};\n\nfunction SignIn(): JSX.Element {\n  const isAuthLoading = useSelector(getLoadinAuthStatus);\n  const dispatch = useDispatch();\n\n  const [formState, setFormState] = useState<FormStateProps>({\n    email: {\n      value: '',\n      error: false,\n      regex: /\\S+@\\S+\\.\\S+/,\n      errorText: 'Please enter a valid email address',\n    },\n    password: {\n      value: '',\n      error: false,\n      regex: /(?=.*\\d)(?=.*[a-z])(?=.*[A-Z])/,\n      errorText:\n        'Please enter a valid password (at least one large, one small letter and a number)',\n    },\n  });\n\n  const formFieldsKeys = Object.keys(formFields);\n\n  const currentError = formFieldsKeys.find((name) => formState[name].error);\n  const hasError = formFieldsKeys.some((name) => formState[name].error);\n  const isEmptyField = formFieldsKeys.some(\n    (name) => formState[name].value === '',\n  );\n\n  const isDisabledSend = hasError || isEmptyField || isAuthLoading;\n\n  const btnClasses = cn('sign-in__btn', {\n    [styles.btnDisabled]: isDisabledSend,\n  });\n\n  const handleChange = ({ target }: ChangeEvent<HTMLInputElement>) => {\n    const { name, value } = target;\n    const rule = formState[name].regex;\n    const isValidField = rule.test(value);\n\n    setFormState({\n      ...formState,\n      [name]: {\n        ...formState[name],\n        error: !isValidField,\n        value,\n      },\n    });\n  };\n\n  const handleSubmit = (evt: FormEvent<HTMLFormElement>) => {\n    evt.preventDefault();\n\n    if (!isDisabledSend) {\n      dispatch(\n        loginAction({\n          login: formState.email.value,\n          password: formState.password.value,\n        }),\n      );\n    }\n  };\n\n  return (\n    <div className=\"sign-in user-page__content\">\n      <form\n        action=\"#\"\n        className=\"sign-in__form\"\n        onSubmit={handleSubmit}\n        noValidate\n      >\n        {currentError && (\n          <div className=\"sign-in__message\" data-testid=\"error\">\n            <p>{formState[currentError].errorText}</p>\n          </div>\n        )}\n\n        <div className=\"sign-in__fields\">\n          {Object.entries(formFields).map(([name, label]) => {\n            const fieldClasses = cn('sign-in__field', {\n              'sign-in__field--error': formState[name].error,\n            });\n\n            return (\n              <div className={fieldClasses} key={name}>\n                <input\n                  className=\"sign-in__input\"\n                  type={name}\n                  placeholder={label}\n                  name={name}\n                  id={name}\n                  value={formState[name].value}\n                  onChange={handleChange}\n                />\n                <label\n                  className=\"sign-in__label visually-hidden\"\n                  htmlFor={name}\n                >\n                  {label}\n                </label>\n              </div>\n            );\n          })}\n        </div>\n        <div className=\"sign-in__submit\">\n          <button\n            className={btnClasses}\n            type=\"submit\"\n            disabled={isDisabledSend}\n          >\n            {isAuthLoading ? (\n              <Loader\n                type=\"Oval\"\n                color=\"#eee5b5\"\n                height={LOADER_HEIGHT}\n                width={LOADER_WIDTH}\n                data-testid=\"loader\"\n              />\n            ) : (\n              'Sign in'\n            )}\n          </button>\n        </div>\n      </form>\n    </div>\n  );\n}\n\nexport default SignIn;\n","import { Redirect } from 'react-router';\nimport { useSelector } from 'react-redux';\nimport Footer from '../../components/footer/footer';\nimport Header from '../../components/header/header';\nimport SignIn from '../../components/sign-in/sign-in';\nimport { AppRoute, AuthorizationStatus } from '../../const';\nimport { getAuthorizationStatus } from '../../store/user/selectors';\n\nfunction SignInScreen(): JSX.Element {\n  const authorizationStatus = useSelector(getAuthorizationStatus);\n\n  if (authorizationStatus === AuthorizationStatus.Auth) {\n    return <Redirect to={AppRoute.Root} />;\n  }\n\n  return (\n    <div className=\"user-page\">\n      <Header className=\"user-page__head\" isVisibleUserMenu={false}>\n        <h1 className=\"page-title user-page__title\">Sign in</h1>\n      </Header>\n      <SignIn />\n      <Footer />\n    </div>\n  );\n}\n\nexport default SignInScreen;\n","import { FilmsType } from '../../types/films';\nimport { State } from '../../types/state';\nimport { NameSpace } from '../root-reducer';\n\nexport const getMyList = (state: State): FilmsType =>\n  state[NameSpace.Favorites].myList;\n\nexport const getLoadingMyListStatus = (state: State): boolean =>\n  state[NameSpace.Favorites].isMyListLoading;\n\nexport const getErrorMyListStatus = (state: State): boolean =>\n  state[NameSpace.Favorites].isMyListError;\n","import cn from 'classnames';\nimport { useEffect } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport Films from '../../components/films/films';\nimport Footer from '../../components/footer/footer';\nimport Header from '../../components/header/header';\nimport { fetchMyListAction } from '../../store/favorites/api-actions';\nimport {\n  getErrorMyListStatus,\n  getLoadingMyListStatus,\n  getMyList\n} from '../../store/favorites/selectors';\nimport ErrorScreen from '../error-screen/error-screen';\nimport LoadingScreen from '../loading-screen/loading-screen';\nimport styles from './my-list-screen.module.scss';\n\nfunction MyListScreen(): JSX.Element {\n  const myList = useSelector(getMyList);\n  const isMyListLoading = useSelector(getLoadingMyListStatus);\n  const isMyListError = useSelector(getErrorMyListStatus);\n\n  const dispatch = useDispatch();\n\n  useEffect(() => {\n    dispatch(fetchMyListAction());\n  }, [dispatch]);\n\n  const titleClasses = cn('page-title user-page__title', styles.title);\n\n  if (isMyListLoading) {\n    return <LoadingScreen />;\n  }\n\n  if (isMyListError) {\n    return <ErrorScreen />;\n  }\n\n  return (\n    <div className=\"user-page\">\n      <Header className=\"user-page__head\" isAuthorizedUser>\n        <h1 className={titleClasses}>My list</h1>\n      </Header>\n\n      <section className=\"catalog\">\n        <h2 className=\"catalog__title visually-hidden\">Catalog</h2>\n        {myList.length ? (\n          <Films films={myList} hasPlayer />\n        ) : (\n          <p className={styles.noContentWrap}>\n            You have not added any movies yet\n          </p>\n        )}\n      </section>\n\n      <Footer />\n    </div>\n  );\n}\n\nexport default MyListScreen;\n","export const getFormattedRating = (rating: number): string => {\n  if (rating > 0 && rating < 3) {\n    return 'Bad';\n  }\n\n  if (rating >= 3 && rating < 5) {\n    return 'Normal';\n  }\n\n  if (rating >= 5 && rating < 8) {\n    return 'Good';\n  }\n\n  if (rating >= 8 && rating < 10) {\n    return 'Good';\n  }\n\n  if (rating === 10) {\n    return 'Awesome';\n  }\n\n  return 'Incorrect';\n};\n\nexport const getTimeFromMins = (mins: number): string => {\n  const hours = Math.trunc(mins / 60);\n  const minutes = mins % 60;\n\n  return `${hours}h ${minutes}m`;\n};\n\nexport const getTimeFromSecs = (secs: number): string => {\n  const TIME_LENGTH = 2;\n  const hours = Math.floor(secs / 3600);\n  const hs = secs % 3600;\n  const minutes = Math.floor(hs / 60);\n  const seconds = hs % 60;\n\n  const displayedHours = `${hours}`.padStart(TIME_LENGTH, '0');\n  const displayedMinutes = `${minutes}`.padStart(TIME_LENGTH, '0');\n  const displayedSeconds = `${seconds}`.padStart(TIME_LENGTH, '0');\n\n  if (hours === 0) {\n    return `${displayedMinutes} : ${displayedSeconds}`;\n  }\n\n  return `${displayedHours} : ${displayedMinutes} : ${displayedSeconds}`;\n};\n\nexport const getFormattedDate = (date: string): string => {\n  const formattedDate = new Date(date).toLocaleString('en', {\n    year: 'numeric',\n    month: 'long',\n    day: 'numeric',\n  });\n\n  return formattedDate;\n};\n","import { getFormattedRating } from '../../utils';\nimport { FilmType } from '../../types/films';\n\ntype OverviewProps = {\n  currentFilm: FilmType;\n};\n\nfunction Overview({ currentFilm }: OverviewProps): JSX.Element {\n  return (\n    <>\n      <div className=\"film-rating\">\n        <div className=\"film-rating__score\">{currentFilm.rating}</div>\n        <p className=\"film-rating__meta\">\n          <span className=\"film-rating__level\">\n            {getFormattedRating(currentFilm.rating)}\n          </span>\n          <span className=\"film-rating__count\">\n            {currentFilm.scoresCount} ratings\n          </span>\n        </p>\n      </div>\n\n      <div className=\"film-card__text\">\n        <p>{currentFilm.description}</p>\n\n        <p className=\"film-card__director\">\n          <strong>Director: {currentFilm.director}</strong>\n        </p>\n\n        <p className=\"film-card__starring\">\n          <strong>Starring: {currentFilm.starring?.join(', ')}</strong>\n        </p>\n      </div>\n    </>\n  );\n}\n\nexport default Overview;\n","import { Fragment } from 'react';\nimport { getTimeFromMins } from '../../utils';\nimport { FilmType } from '../../types/films';\n\ntype DetailsProps = {\n  currentFilm: FilmType;\n};\n\nfunction Details({ currentFilm }: DetailsProps): JSX.Element {\n  return (\n    <div className=\"film-card__text film-card__row\">\n      <div className=\"film-card__text-col\">\n        <p className=\"film-card__details-item\">\n          <strong className=\"film-card__details-name\">Director</strong>\n          <span className=\"film-card__details-value\">\n            {currentFilm.director}\n          </span>\n        </p>\n        <p className=\"film-card__details-item\">\n          <strong className=\"film-card__details-name\">Starring</strong>\n          <span className=\"film-card__details-value\">\n            {currentFilm.starring.map((actor, i, actors) => {\n              if (i === actors.length - 1) {\n                return <Fragment key={actor}>{actor}</Fragment>;\n              }\n\n              return (\n                <Fragment key={actor}>\n                  {actor}, <br />\n                </Fragment>\n              );\n            })}\n          </span>\n        </p>\n      </div>\n\n      <div className=\"film-card__text-col\">\n        <p className=\"film-card__details-item\">\n          <strong className=\"film-card__details-name\">Run Time</strong>\n          <span className=\"film-card__details-value\">\n            {getTimeFromMins(currentFilm.runTime)}\n          </span>\n        </p>\n        <p className=\"film-card__details-item\">\n          <strong className=\"film-card__details-name\">Genre</strong>\n          <span className=\"film-card__details-value\">{currentFilm.genre}</span>\n        </p>\n        <p className=\"film-card__details-item\">\n          <strong className=\"film-card__details-name\">Released</strong>\n          <span className=\"film-card__details-value\">\n            {currentFilm.released}\n          </span>\n        </p>\n      </div>\n    </div>\n  );\n}\n\nexport default Details;\n","import { ReviewType } from '../../types/reviews';\nimport { getFormattedDate } from '../../utils';\n\ntype ReviewProps = {\n  review: ReviewType;\n};\n\nfunction Review({ review }: ReviewProps): JSX.Element {\n  return (\n    <div className=\"review\" data-testid=\"review\">\n      <blockquote className=\"review__quote\">\n        <p className=\"review__text\">{review.comment}</p>\n\n        <footer className=\"review__details\">\n          <cite className=\"review__author\">{review.user.name}</cite>\n          <time className=\"review__date\" dateTime={review.date}>\n            {getFormattedDate(review.date)}\n          </time>\n        </footer>\n      </blockquote>\n\n      <div className=\"review__rating\">{review.rating}</div>\n    </div>\n  );\n}\n\nexport default Review;\n","import { NameSpace } from '../root-reducer';\nimport { State } from '../../types/state';\nimport { ReviewsType } from '../../types/reviews';\n\nexport const getReviews = (state: State): ReviewsType =>\n  state[NameSpace.Reviews].reviews;\n\nexport const getLoadingReviewsStatus = (state: State): boolean =>\n  state[NameSpace.Reviews].isReviewsLoading;\n\nexport const getErrorReviewsStatus = (state: State): boolean =>\n  state[NameSpace.Reviews].isReviewsError;\n\nexport const getLoadingSendReviewStatus = (state: State): boolean =>\n  state[NameSpace.Reviews].isSendReviewLoading;\n","import { useParams } from 'react-router-dom';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { useEffect } from 'react';\nimport Review from '../review/review';\nimport Loader from 'react-loader-spinner';\nimport styles from './reviews.module.scss';\nimport { ANOTHER_TIME_ERROR } from '../../const';\nimport {\n  getErrorReviewsStatus,\n  getLoadingReviewsStatus,\n  getReviews\n} from '../../store/reviews/selectors';\nimport { fetchReviewsAction } from '../../store/reviews/api-actions';\n\nconst LOADER_WIDTH = 40;\nconst LOADER_HEIGHT = 40;\n\nfunction Reviews(): JSX.Element {\n  const reviews = useSelector(getReviews);\n  const isReviewsLoading = useSelector(getLoadingReviewsStatus);\n  const isReviewsError = useSelector(getErrorReviewsStatus);\n  const dispatch = useDispatch();\n\n  const { id }: { id: string } = useParams();\n  const middleReviews = Math.round(reviews.length / 2) - 1;\n\n  useEffect(() => {\n    if (!id) {\n      return;\n    }\n\n    dispatch(fetchReviewsAction(id));\n  }, [id, dispatch]);\n\n  if (isReviewsLoading) {\n    return (\n      <div className={styles.reviewsWrap} data-testid=\"loader\">\n        <Loader type=\"Oval\" color=\"#180202\" height={LOADER_HEIGHT} width={LOADER_WIDTH} />\n      </div>\n    );\n  }\n\n  if (isReviewsError) {\n    return (\n      <div className={styles.reviewsWrap}>\n        <p className={styles.reviewsText}>{ANOTHER_TIME_ERROR}</p>\n      </div>\n    );\n  }\n\n  if (!reviews.length) {\n    return (\n      <div className={styles.reviewsWrap}>\n        <p className={styles.reviewsText}>So far, no one has left a review</p>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"film-card__reviews film-card__row\">\n      <div className=\"film-card__reviews-col\">\n        {reviews.map(\n          (review, i) =>\n            i <= middleReviews && <Review key={review.id} review={review} />,\n        )}\n      </div>\n      <div className=\"film-card__reviews-col\">\n        {reviews.map(\n          (review, i) =>\n            i > middleReviews && <Review key={review.id} review={review} />,\n        )}\n      </div>\n    </div>\n  );\n}\n\nexport default Reviews;\n","import { ThunkActionResult } from '../../types/actions';\nimport {\n  redirectToRoute,\n  loadReviewsRequest,\n  loadReviewsSuccess,\n  loadReviewsError,\n  sendReviewRequest\n} from '../actions';\nimport {\n  APIRoute,\n  TRY_AGAIN_ERROR\n} from '../../const';\nimport camelcaseKeys from 'camelcase-keys';\nimport { toast } from 'react-toastify';\nimport { ReviewSend, ReviewsType } from '../../types/reviews';\n\nexport const fetchReviewsAction = (id: string): ThunkActionResult => async (\n  dispatch,\n  _,\n  api,\n) => {\n  dispatch(loadReviewsRequest(true));\n  try {\n    const { data } = await api.get<ReviewsType>(`${APIRoute.Reviews}/${id}`);\n    const normalizedData = camelcaseKeys(data);\n\n    dispatch(loadReviewsSuccess(normalizedData));\n  } catch (e) {\n    dispatch(loadReviewsError(true));\n  } finally {\n    dispatch(loadReviewsRequest(false));\n  }\n};\n\nexport const fetchSendReviewAction = (\n  review: ReviewSend,\n  id: string,\n): ThunkActionResult => async (dispatch, _, api) => {\n  dispatch(sendReviewRequest(true));\n\n  try {\n    await api.post<ReviewSend>(`${APIRoute.Reviews}/${id}`, review);\n    dispatch(redirectToRoute(`/films/${id}`));\n  } catch (e) {\n    toast.error(TRY_AGAIN_ERROR);\n  } finally {\n    dispatch(sendReviewRequest(false));\n  }\n};\n","import { useState } from 'react';\nimport cn from 'classnames';\nimport { FilmType } from '../../types/films';\nimport Overview from '../overview/overview';\nimport Details from '../details/details';\nimport styles from './tabs.module.scss';\nimport Reviews from '../reviews/reviews';\n\ntype TabsProps = {\n  currentFilm: FilmType;\n};\n\nfunction Tabs({ currentFilm }: TabsProps): JSX.Element {\n  const tabs = ['Overview', 'Details', 'Reviews'];\n\n  const [active, setActive] = useState(tabs[0]);\n\n  const tabClasses = (tab: string) =>\n    cn('film-nav__item', { 'film-nav__item--active': tab === active });\n\n  const btnClasses = cn('film-nav__link', styles.resetButton);\n\n  return (\n    <>\n      <nav className=\"film-nav film-card__nav\">\n        <ul className=\"film-nav__list\">\n          {tabs.map((tab) => (\n            <li className={tabClasses(tab)} key={tab}>\n              <button\n                className={btnClasses}\n                type=\"button\"\n                onClick={() => setActive(tab)}\n              >\n                {tab}\n              </button>\n            </li>\n          ))}\n        </ul>\n      </nav>\n\n      {active === tabs[0] && <Overview currentFilm={currentFilm} />}\n\n      {active === tabs[1] && <Details currentFilm={currentFilm} />}\n\n      {active === tabs[2] && <Reviews />}\n    </>\n  );\n}\n\nexport default Tabs;\n","import { FilmsType } from '../../types/films';\nimport { State } from '../../types/state';\nimport { NameSpace } from '../root-reducer';\n\nexport const getSimilar = (state: State): FilmsType =>\n  state[NameSpace.SimilarFilms].similar;\n\nexport const getLoadingSimilarStatus = (state: State): boolean =>\n  state[NameSpace.SimilarFilms].isSimilarLoading;\n\nexport const getErrorSimilarStatus = (state: State): boolean =>\n  state[NameSpace.SimilarFilms].isSimilarError;\n","import { useParams } from 'react-router-dom';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { useEffect } from 'react';\nimport Footer from '../../components/footer/footer';\nimport Header from '../../components/header/header';\nimport Films from '../../components/films/films';\nimport Tabs from '../../components/tabs/tabs';\nimport ErrorScreen from '../error-screen/error-screen';\nimport LoadingScreen from '../loading-screen/loading-screen';\nimport Loader from 'react-loader-spinner';\nimport styles from './movie-screen.module.scss';\nimport { ANOTHER_TIME_ERROR, ERROR_404, OTHER_ERRORS } from '../../const';\nimport Controls from '../../components/controls/controls';\nimport {\n  getErrorFilmStatus,\n  getFilm,\n  getLoadingFilmStatus\n} from '../../store/film/selectors';\nimport {\n  getErrorSimilarStatus,\n  getLoadingSimilarStatus,\n  getSimilar\n} from '../../store/similar-films/selectors';\nimport { fetchFilmAction } from '../../store/film/api-actions';\nimport { fetchSimilarAction } from '../../store/similar-films/api-actions';\n\nconst MAX_VISIBLE_SIMILAR_FILMS = 4;\nconst LOADER_WIDTH = 50;\nconst LOADER_HEIGHT = 50;\n\nfunction MovieScreen(): JSX.Element {\n  const film = useSelector(getFilm);\n  const isFilmLoading = useSelector(getLoadingFilmStatus);\n  const filmError = useSelector(getErrorFilmStatus);\n  const similar = useSelector(getSimilar);\n  const isSimilarLoading = useSelector(getLoadingSimilarStatus);\n  const isSimilarError = useSelector(getErrorSimilarStatus);\n\n  const dispatch = useDispatch();\n\n  const { id }: { id: string } = useParams();\n\n  useEffect(() => {\n    if (!id) {\n      return;\n    }\n\n    dispatch(fetchFilmAction(id));\n    dispatch(fetchSimilarAction(id));\n  }, [dispatch, id]);\n\n  const getSimilarContent = () => {\n    if (isSimilarLoading) {\n      return (\n        <div className={styles.similarWrap}>\n          <Loader type=\"Oval\" color=\"#eee5b5\" height={LOADER_HEIGHT} width={LOADER_WIDTH} />\n        </div>\n      );\n    }\n\n    if (isSimilarError) {\n      return (\n        <div className={styles.similarWrap}>\n          <p className={styles.similarText}>{ANOTHER_TIME_ERROR}</p>\n        </div>\n      );\n    }\n\n    return (\n      <Films\n        films={similar.slice(0, MAX_VISIBLE_SIMILAR_FILMS)}\n        hasPlayer={false}\n      />\n    );\n  };\n\n  if (isFilmLoading) {\n    return <LoadingScreen />;\n  }\n\n  if (filmError === ERROR_404.toString()) {\n    return <ErrorScreen type=\"404\" />;\n  }\n\n  if (filmError === OTHER_ERRORS) {\n    return <ErrorScreen />;\n  }\n\n  return (\n    <>\n      <section className=\"film-card film-card--full\">\n        <div className=\"film-card__hero\">\n          <div className=\"film-card__bg\">\n            <img\n              src=\"img/bg-the-grand-budapest-hotel.jpg\"\n              alt=\"The Grand Budapest Hotel\"\n            />\n          </div>\n\n          <h1 className=\"visually-hidden\">WTW</h1>\n\n          <Header className=\"film-card__head\" isAuthorizedUser />\n\n          <div className=\"film-card__wrap\">\n            <div className=\"film-card__desc\">\n              <h2 className=\"film-card__title\">{film.name}</h2>\n              <p className=\"film-card__meta\">\n                <span className=\"film-card__genre\">{film.genre}</span>\n                <span className=\"film-card__year\">{film.rating}</span>\n              </p>\n\n              <Controls hasReviewControl />\n            </div>\n          </div>\n        </div>\n\n        <div className=\"film-card__wrap film-card__translate-top\">\n          <div className=\"film-card__info\">\n            <div className=\"film-card__poster film-card__poster--big\">\n              <img\n                src={film.posterImage}\n                alt={film.name}\n                width=\"218\"\n                height=\"327\"\n              />\n            </div>\n\n            <div className=\"film-card__desc\">\n              <Tabs currentFilm={film} />\n            </div>\n          </div>\n        </div>\n      </section>\n\n      <div className=\"page-content\">\n        <section className=\"catalog catalog--like-this\">\n          <h2 className=\"catalog__title\">More like this</h2>\n          {getSimilarContent()}\n        </section>\n        <Footer />\n      </div>\n    </>\n  );\n}\n\nexport default MovieScreen;\n","import { ThunkActionResult } from '../../types/actions';\nimport {\n  loadFilmRequest,\n  loadFilmSuccess,\n  loadFilmError\n} from '../actions';\nimport {\n  APIRoute,\n  ERROR_404,\n  OTHER_ERRORS\n} from '../../const';\nimport { FilmType } from '../../types/films';\nimport camelcaseKeys from 'camelcase-keys';\n\nexport const fetchFilmAction = (id: string): ThunkActionResult => async (\n  dispatch,\n  getState,\n  api,\n) => {\n  dispatch(loadFilmRequest(true));\n\n  try {\n    getState().FILM.filmError && dispatch(loadFilmError(''));\n\n    const { data } = await api.get<FilmType>(`${APIRoute.Films}/${id}`);\n    const normalizedData = camelcaseKeys(data);\n\n    dispatch(loadFilmSuccess(normalizedData));\n  } catch (e) {\n    e === ERROR_404\n      ? dispatch(loadFilmError(ERROR_404.toString()))\n      : dispatch(loadFilmError(OTHER_ERRORS));\n  } finally {\n    dispatch(loadFilmRequest(false));\n  }\n};\n","import { ThunkActionResult } from '../../types/actions';\nimport {\n  loadSimilarRequest,\n  loadSimilarSuccess,\n  loadSimilarError\n} from '../actions';\nimport {\n  APIRoute\n} from '../../const';\nimport { FilmsType } from '../../types/films';\nimport camelcaseKeys from 'camelcase-keys';\n\nexport const fetchSimilarAction = (id: string): ThunkActionResult => async (\n  dispatch,\n  getState,\n  api,\n) => {\n  dispatch(loadSimilarRequest(true));\n\n  try {\n    getState().SIMILAR_FILMS.isSimilarError && dispatch(loadSimilarError(false));\n\n    const { data } = await api.get<FilmsType>(`${APIRoute.Films}/${id}/similar`);\n    const normalizedData = camelcaseKeys(data);\n\n    dispatch(loadSimilarSuccess(normalizedData));\n  } catch (e) {\n    dispatch(loadSimilarError(true));\n  } finally {\n    dispatch(loadSimilarRequest(false));\n  }\n};\n","import { Link } from 'react-router-dom';\n\ntype BreadcrumbsProps = {\n  filmName: string;\n  id: number;\n};\n\nfunction Breadcrumbs({ filmName, id }: BreadcrumbsProps): JSX.Element {\n  return (\n    <nav className=\"breadcrumbs\">\n      <ul className=\"breadcrumbs__list\">\n        <li className=\"breadcrumbs__item\">\n          <Link to={`/films/${id}`} className=\"breadcrumbs__link\">\n            {filmName}\n          </Link>\n        </li>\n        <li className=\"breadcrumbs__item\">\n          <a className=\"breadcrumbs__link\">Add review</a>\n        </li>\n      </ul>\n    </nav>\n  );\n}\n\nexport default Breadcrumbs;\n","import { ChangeEvent, memo } from 'react';\n\ntype RatingProps = {\n  rating: number;\n  checked: number | null;\n  onChange: (ratingQuantity: number) => void;\n};\n\nfunction Rating({ rating, checked, onChange }: RatingProps): JSX.Element {\n  const handleChange = ({ target }: ChangeEvent<HTMLInputElement>) => {\n    const value = +target.value;\n    onChange(value);\n  };\n\n  return (\n    <>\n      <input\n        className=\"rating__input\"\n        id={`star-${rating}`}\n        type=\"radio\"\n        name=\"rating\"\n        value={rating}\n        checked={rating === checked}\n        onChange={handleChange}\n        data-testid={`star-${rating}`}\n      />\n      <label className=\"rating__label\" htmlFor={`star-${rating}`}>\n        Rating {rating}\n      </label>\n    </>\n  );\n}\n\nexport default memo(Rating);\n","import { useState, ChangeEvent, FormEvent, useCallback } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport Rating from '../rating/rating';\nimport { useParams } from 'react-router-dom';\nimport Loader from 'react-loader-spinner';\nimport cn from 'classnames';\nimport styles from './comment-form.module.scss';\nimport { getLoadingSendReviewStatus } from '../../store/reviews/selectors';\nimport { fetchSendReviewAction } from '../../store/reviews/api-actions';\n\nconst MAX_NUMBER_RATING = 10;\nconst MIN_LENGTH_COMMENT = 50;\nconst MAX_LENTGH_COMMENT = 400;\nconst LOADER_WIDTH = 50;\nconst LOADER_HEIGHT = 50;\n\nconst ratings = Array.from(\n  { length: MAX_NUMBER_RATING },\n  (_, i) => i + 1,\n).reverse();\n\nfunction CommentForm(): JSX.Element {\n  const isSendReviewLoading = useSelector(getLoadingSendReviewStatus);\n  const dispatch = useDispatch();\n\n  const { id }: { id: string } = useParams();\n\n  const [comment, setComment] = useState<string>('');\n  const [rating, setRating] = useState<number | null>(null);\n\n  const isDisabledForm =\n    comment === '' ||\n    comment.length < MIN_LENGTH_COMMENT ||\n    comment.length > MAX_LENTGH_COMMENT ||\n    !rating ||\n    isSendReviewLoading;\n\n  const handleCommentChange = ({\n    target,\n  }: ChangeEvent<HTMLTextAreaElement>) => {\n    setComment(target.value);\n  };\n\n  const handleRatingChange = useCallback(\n    (ratingQuantity: number) => setRating(ratingQuantity),\n    [],\n  );\n\n  const handleSubmit = (evt: FormEvent<HTMLFormElement>) => {\n    evt.preventDefault();\n\n    if (!isDisabledForm) {\n      dispatch(fetchSendReviewAction({ rating, comment }, id));\n    }\n  };\n\n  const formClasses = cn('add-review', styles.wrap);\n\n  if (isSendReviewLoading) {\n    return (\n      <div className={formClasses} data-testid=\"loader\">\n        <Loader type=\"Oval\" color=\"#180202\" height={LOADER_HEIGHT} width={LOADER_WIDTH} />\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"add-review\">\n      <form action=\"#\" className=\"add-review__form\" onSubmit={handleSubmit}>\n        <div className=\"rating\">\n          <div className=\"rating__stars\">\n            {ratings.map((item) => (\n              <Rating\n                key={item}\n                rating={item}\n                checked={rating}\n                onChange={handleRatingChange}\n              />\n            ))}\n          </div>\n        </div>\n\n        <div className=\"add-review__text\">\n          <textarea\n            className=\"add-review__textarea\"\n            name=\"review-text\"\n            id=\"review-text\"\n            placeholder=\"Review text\"\n            onChange={handleCommentChange}\n            value={comment}\n          />\n          <div className=\"add-review__submit\">\n            <button\n              className=\"add-review__btn\"\n              type=\"submit\"\n              disabled={isDisabledForm}\n            >\n              Post\n            </button>\n          </div>\n        </div>\n      </form>\n    </div>\n  );\n}\n\nexport default CommentForm;\n","import { useSelector } from 'react-redux';\nimport Breadcrumbs from '../../components/breadcrumbs/breadcrumbs';\nimport Header from '../../components/header/header';\nimport CommentForm from '../../components/comment-form/comment-form';\nimport ErrorScreen from '../error-screen/error-screen';\nimport { getFilm } from '../../store/film/selectors';\n\nfunction AddReviewScreen(): JSX.Element {\n  const film = useSelector(getFilm);\n\n  const hasFilm = Object.keys(film).length !== 0;\n\n  if (hasFilm) {\n    return (\n      <section className=\"film-card film-card--full\">\n        <div className=\"film-card__header\">\n          <div className=\"film-card__bg\">\n            <img src={film.backgroundImage} alt={film.name} />\n          </div>\n\n          <h1 className=\"visually-hidden\">WTW</h1>\n\n          <Header isAuthorizedUser>\n            <Breadcrumbs filmName={film.name} id={film.id} />\n          </Header>\n\n          <div className=\"film-card__poster film-card__poster--small\">\n            <img\n              src={film.posterImage}\n              alt={`${film.name} poster`}\n              width=\"218\"\n              height=\"327\"\n            />\n          </div>\n        </div>\n\n        <CommentForm />\n      </section>\n    );\n  }\n\n  return <ErrorScreen />;\n}\n\nexport default AddReviewScreen;\n","import cn from 'classnames';\nimport { memo, MouseEvent, useRef } from 'react';\nimport { MAX_VIDEO_PROGRESS } from '../../const';\nimport { getTimeFromSecs } from '../../utils';\nimport styles from './progress.module.scss';\n\ntype ProgressProps = {\n  progress: number;\n  time: string;\n  onChangeProgress: (progress: number) => void;\n  onChangeTime: (time: string) => void;\n  video: HTMLVideoElement | null;\n  isLoadedMetaData: boolean;\n};\n\nfunction Progress({\n  progress,\n  time,\n  onChangeProgress,\n  onChangeTime,\n  video,\n  isLoadedMetaData,\n}: ProgressProps): JSX.Element {\n  const toggleRef = useRef<HTMLDivElement | null>(null);\n  const wrapRef = useRef<HTMLDivElement | null>(null);\n\n  const progressClasses = cn('player__progress', styles.progress);\n\n  const setTime = (currentProgress: number) => {\n    if (!video) {\n      return;\n    }\n\n    const currentTime = (video.duration * currentProgress) / MAX_VIDEO_PROGRESS;\n    const reverseTime = Math.round(video.duration - currentTime);\n\n    const formattedTime = getTimeFromSecs(reverseTime);\n    onChangeTime(formattedTime);\n\n    video.currentTime = currentTime;\n  };\n\n  const handleProgressClick = (evt: MouseEvent<HTMLProgressElement>) => {\n    const target = evt.currentTarget;\n    const leftOffset = target.getBoundingClientRect().left;\n    const fullWidth = target.offsetWidth;\n\n    const currentProgress = Math.round(\n      ((evt.clientX - leftOffset) * MAX_VIDEO_PROGRESS) / fullWidth,\n    );\n\n    onChangeProgress(currentProgress);\n    setTime(currentProgress);\n  };\n\n  const handleToggleMouseDown = (evt: MouseEvent<HTMLDivElement>) => {\n    evt.preventDefault();\n\n    const target = evt.currentTarget;\n    const leftOffset = target.getBoundingClientRect().left;\n    const shiftX = evt.clientX - leftOffset;\n\n    const onMouseMove = (e: { clientX: number }) => {\n      if (!shiftX || !wrapRef.current || !toggleRef.current) {\n        return;\n      }\n\n      const wrapLeftOffset = wrapRef.current.getBoundingClientRect().left;\n      let newLeft = e.clientX - shiftX - wrapLeftOffset;\n\n      if (newLeft < 0) {\n        newLeft = 0;\n      }\n\n      const rightEdge = wrapRef.current.offsetWidth;\n\n      if (newLeft > rightEdge) {\n        newLeft = rightEdge;\n      }\n\n      const currentPosition =\n        (newLeft * MAX_VIDEO_PROGRESS) / wrapRef.current.offsetWidth;\n\n      toggleRef.current.style.left = `${currentPosition}%`;\n\n      onChangeProgress(\n        (newLeft * MAX_VIDEO_PROGRESS) / wrapRef.current.offsetWidth,\n      );\n\n      if (video) {\n        const currentTime =\n          (video.duration * currentPosition) / MAX_VIDEO_PROGRESS;\n        video.currentTime = currentTime;\n\n        onChangeTime(getTimeFromSecs(Math.round(video.duration - currentTime)));\n      }\n    };\n\n    const onMouseUp = () => {\n      document.removeEventListener('mouseup', onMouseUp);\n      document.removeEventListener('mousemove', onMouseMove);\n    };\n\n    document.addEventListener('mousemove', onMouseMove);\n    document.addEventListener('mouseup', onMouseUp);\n  };\n\n  return (\n    <>\n      <div className=\"player__time\" ref={wrapRef}>\n        <progress\n          className={progressClasses}\n          value={progress}\n          max=\"100\"\n          onClick={handleProgressClick}\n        />\n        <div\n          className=\"player__toggler\"\n          style={{ left: `${progress}%` }}\n          onMouseDown={handleToggleMouseDown}\n          ref={toggleRef}\n          data-testid=\"video-toggle\"\n        >\n          Toggle\n        </div>\n      </div>\n      <div className=\"player__time-value\" data-testid=\"video-time\">\n        {isLoadedMetaData ? time : '00:00'}\n      </div>\n    </>\n  );\n}\n\nexport default memo(Progress);\n","type ReloadProps = {\n  width: number;\n  height: number;\n  color: string;\n  className?: string;\n  onClick: () => void;\n};\n\nfunction Reload({\n  width,\n  height,\n  color,\n  className = '',\n  onClick,\n}: ReloadProps): JSX.Element {\n  return (\n    <svg\n      xmlns=\"http://www.w3.org/2000/svg\"\n      width={width}\n      height={height}\n      viewBox=\"0 0 1024 1024\"\n      color={color}\n      className={className}\n      onClick={onClick}\n      data-testid=\"reload\"\n    >\n      <path\n        d=\"m909.1 209.3-56.4 44.1C775.8 155.1 656.2 92 521.9 92 290 92 102.3 279.5 102 511.5 101.7 743.7 289.8 932 521.9 932c181.3 0 335.8-115 394.6-276.1 1.5-4.2-.7-8.9-4.9-10.3l-56.7-19.5a8 8 0 0 0-10.1 4.8c-1.8 5-3.8 10-5.9 14.9-17.3 41-42.1 77.8-73.7 109.4A344.77 344.77 0 0 1 655.9 829c-42.3 17.9-87.4 27-133.8 27-46.5 0-91.5-9.1-133.8-27A341.5 341.5 0 0 1 279 755.2a342.16 342.16 0 0 1-73.7-109.4c-17.9-42.4-27-87.4-27-133.9s9.1-91.5 27-133.9c17.3-41 42.1-77.8 73.7-109.4 31.6-31.6 68.4-56.4 109.3-73.8 42.3-17.9 87.4-27 133.8-27 46.5 0 91.5 9.1 133.8 27a341.5 341.5 0 0 1 109.3 73.8c9.9 9.9 19.2 20.4 27.8 31.4l-60.2 47a8 8 0 0 0 3 14.1l175.6 43c5 1.2 9.9-2.6 9.9-7.7l.8-180.9c-.1-6.6-7.8-10.3-13-6.2z\"\n        fill=\"currentColor\"\n      />\n    </svg>\n  );\n}\n\nexport default Reload;\n","import { useHistory, useParams } from 'react-router-dom';\nimport ErrorScreen from '../error-screen/error-screen';\nimport { useSelector } from 'react-redux';\nimport { getCurrentFilm, getFilms } from '../../store/films/selectors';\nimport { useEffect, useRef, useState, MouseEvent, useCallback } from 'react';\nimport Loader from 'react-loader-spinner';\nimport styles from './player-screen.module.scss';\nimport LoadingScreen from '../loading-screen/loading-screen';\nimport { getTimeFromSecs } from '../../utils';\nimport Progress from '../../components/progress/progress';\nimport Reload from '../../components/reload/reload';\nimport { MAX_VIDEO_PROGRESS } from '../../const';\nimport { State } from '../../types/state';\n\nconst INITIAL_PROGRESS = 0;\nconst LOADER_WIDTH = 50;\nconst LOADER_HEIGHT = 50;\nconst RELOAD_WIDTH = 60;\nconst RELOAD_HEIGHT = 60;\n\nfunction PlayerScreen(): JSX.Element {\n  const { id }: { id: string } = useParams();\n  const history = useHistory();\n\n  const films = useSelector(getFilms);\n  const currentFilm = useSelector((state: State) => getCurrentFilm(state, id));\n\n  const videoRef = useRef<HTMLVideoElement | null>(null);\n\n  const [isPlaying, setIsPlaying] = useState(false);\n  const [isLoading, setIsLoading] = useState(true);\n  const [isLoadedMetaData, setIsLoadedMetaData] = useState(false);\n  const [isEnded, setIsEnded] = useState(false);\n  const [time, setTime] = useState('');\n  const [progress, setProgress] = useState(INITIAL_PROGRESS);\n\n  useEffect(() => {\n    if (!videoRef.current) {\n      return;\n    }\n\n    if (isPlaying) {\n      videoRef.current.play();\n    } else {\n      videoRef.current.pause();\n    }\n  }, [isPlaying]);\n\n  const handlePlayClick = (evt: MouseEvent<HTMLButtonElement>) => {\n    evt.preventDefault();\n    setIsPlaying(true);\n\n    isPlaying && setIsPlaying(false);\n  };\n\n  const handleFullClick = (evt: MouseEvent<HTMLButtonElement>) => {\n    evt.preventDefault();\n    videoRef.current && videoRef.current.requestFullscreen();\n  };\n\n  const handleExitClick = (evt: MouseEvent<HTMLButtonElement>) => {\n    evt.preventDefault();\n    isPlaying && setIsPlaying(false);\n    history.goBack();\n  };\n\n  const handleLoadedMetadata = () => {\n    if (videoRef.current) {\n      const currentTime = getTimeFromSecs(\n        Math.round(videoRef.current.duration),\n      );\n\n      setTime(currentTime);\n      setIsLoadedMetaData(true);\n    }\n  };\n\n  const handleLoadedData = () => {\n    setIsPlaying(true);\n    setIsLoading(false);\n  };\n\n  const handleWaiting = () => {\n    setIsLoading(true);\n  };\n\n  const handlePlaying = () => {\n    setIsLoading(false);\n  };\n\n  const handlePlay = () => {\n    isPlaying === false && setIsPlaying(true);\n  };\n\n  const handlePause = () => {\n    isPlaying === true && setIsPlaying(false);\n  };\n\n  const handleTimeUpdate = () => {\n    if (videoRef.current !== null) {\n      const currentTime = getTimeFromSecs(\n        Math.round(videoRef.current.duration - videoRef.current.currentTime),\n      );\n      const currentProgress = Math.round(\n        (videoRef.current.currentTime / videoRef.current.duration) *\n          MAX_VIDEO_PROGRESS,\n      );\n\n      setTime(currentTime);\n      setProgress(currentProgress);\n    }\n  };\n\n  const handleChangeProgress = useCallback((currentProgress: number) => {\n    setProgress(currentProgress);\n  }, []);\n\n  const handleChangeTime = useCallback((currentTime: string) => {\n    setTime(currentTime);\n  }, []);\n\n  const handleEnded = () => {\n    setIsPlaying(false);\n    setIsEnded(true);\n  };\n\n  const handleReloadClick = () => {\n    if (videoRef.current) {\n      videoRef.current.currentTime = 0;\n      setTime(getTimeFromSecs(Math.round(videoRef.current.duration)));\n      setIsEnded(false);\n      setIsPlaying(true);\n    }\n  };\n\n  const isVisibleLoader = (isLoading && isPlaying) || (isLoading && !isPlaying);\n\n  if (!films.length) {\n    return <LoadingScreen />;\n  }\n\n  if (!currentFilm) {\n    return <ErrorScreen />;\n  }\n\n  return (\n    <div className=\"player\">\n      <div className={styles.loaderWrap}>\n        <Loader\n          type=\"Oval\"\n          color=\"#d9cd8d\"\n          height={LOADER_HEIGHT}\n          width={LOADER_WIDTH}\n          visible={isVisibleLoader}\n        />\n        {isEnded && progress === MAX_VIDEO_PROGRESS && (\n          <Reload\n            className={styles.reload}\n            height={RELOAD_HEIGHT}\n            width={RELOAD_WIDTH}\n            color=\"#d9cd8d\"\n            onClick={handleReloadClick}\n          />\n        )}\n      </div>\n      <video\n        src={currentFilm.videoLink}\n        className=\"player__video\"\n        poster={currentFilm.posterImage}\n        ref={videoRef}\n        onWaiting={handleWaiting}\n        onPlaying={handlePlaying}\n        onCanPlay={handlePlaying}\n        onTimeUpdate={handleTimeUpdate}\n        onLoadedMetadata={handleLoadedMetadata}\n        onLoadedData={handleLoadedData}\n        onEnded={handleEnded}\n        onPlay={handlePlay}\n        onPause={handlePause}\n        data-testid=\"video-player\"\n      />\n\n      <button type=\"button\" className=\"player__exit\" onClick={handleExitClick}>\n        Exit\n      </button>\n\n      <div className=\"player__controls\">\n        <div className=\"player__controls-row\">\n          <Progress\n            progress={progress}\n            time={time}\n            onChangeProgress={handleChangeProgress}\n            onChangeTime={handleChangeTime}\n            video={videoRef.current}\n            isLoadedMetaData={isLoadedMetaData}\n          />\n        </div>\n        <div className=\"player__controls-row\">\n          <button\n            type=\"button\"\n            className=\"player__play\"\n            onClick={handlePlayClick}\n          >\n            {isPlaying ? (\n              <>\n                <svg viewBox=\"0 0 14 21\" width=\"14\" height=\"21\">\n                  <use xlinkHref=\"#pause\" />\n                </svg>\n                <span>Pause</span>\n              </>\n            ) : (\n              <>\n                <svg viewBox=\"0 0 19 19\" width=\"19\" height=\"19\">\n                  <use xlinkHref=\"#play-s\" />\n                </svg>\n                <span>Play</span>\n              </>\n            )}\n          </button>\n          <button type=\"button\" className=\"player__play\" />\n          <div className=\"player__name\">{currentFilm.name}</div>\n\n          <button\n            type=\"button\"\n            className=\"player__full-screen\"\n            onClick={handleFullClick}\n          >\n            <svg viewBox=\"0 0 27 27\" width=\"27\" height=\"27\">\n              <use xlinkHref=\"#full-screen\" />\n            </svg>\n            <span>Full screen</span>\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default PlayerScreen;\n","import { Route, Redirect } from 'react-router-dom';\nimport { RouteProps } from 'react-router-dom';\nimport { useSelector } from 'react-redux';\nimport { AppRoute, AuthorizationStatus } from '../../const';\nimport { getAuthorizationStatus } from '../../store/user/selectors';\nimport { getCheckAuthStatus } from '../../store/user/selectors';\nimport LoadingScreen from '../../pages/loading-screen/loading-screen';\n\ntype PrivateRouteProps = RouteProps & {\n  render: () => JSX.Element;\n};\n\nfunction PrivateRoute({ exact, path, render }: PrivateRouteProps): JSX.Element {\n  const authorizationStatus = useSelector(getAuthorizationStatus);\n  const isCheckAuthLoading = useSelector(getCheckAuthStatus);\n\n  if (isCheckAuthLoading) {\n    return <LoadingScreen />;\n  }\n\n  return (\n    <Route\n      exact={exact}\n      path={path}\n      render={() =>\n        authorizationStatus === AuthorizationStatus.Auth ? (\n          render()\n        ) : (\n          <Redirect to={AppRoute.Login} />\n        )}\n    />\n  );\n}\n\nexport default PrivateRoute;\n","import MainScreen from '../../pages/main-screen/main-screen';\nimport { Route, Switch } from 'react-router-dom';\nimport ScrollToTop from '../scroll-to-top/scroll-to-top';\nimport { AppRoute } from '../../const';\nimport SignInScreen from '../../pages/sign-in-screen/sign-in-screen';\nimport MyListScreen from '../../pages/my-list-screen/my-list-screen';\nimport MovieScreen from '../../pages/movie-screen/movie-screen';\nimport AddReviewScreen from '../../pages/add-review-screen/add-review-screen';\nimport PlayerScreen from '../../pages/player-screen/player-screen';\nimport PrivateRoute from '../private-route/private-route';\nimport ErrorScreen from '../../pages/error-screen/error-screen';\n\nfunction App(): JSX.Element {\n  return (\n    <>\n      <ScrollToTop />\n      <Switch>\n        <Route path=\"/\" exact>\n          <MainScreen />\n        </Route>\n        <Route path={AppRoute.Login} exact>\n          <SignInScreen />\n        </Route>\n        <PrivateRoute\n          exact\n          path={AppRoute.MyList}\n          render={() => <MyListScreen />}\n        />\n        <Route path={AppRoute.Film} exact>\n          <MovieScreen />\n        </Route>\n        <PrivateRoute\n          exact\n          path={AppRoute.AddReview}\n          render={() => <AddReviewScreen />}\n        />\n        <Route path={AppRoute.Player} exact>\n          <PlayerScreen />\n        </Route>\n        <Route>\n          <ErrorScreen type=\"404\" />\n        </Route>\n      </Switch>\n    </>\n  );\n}\n\nexport default App;\n","import { createBrowserHistory } from 'history';\n\nconst browserHistory = createBrowserHistory();\n\nexport default browserHistory;\n","import browserHistory from '../../browser-history';\nimport { Middleware } from 'redux';\nimport {State} from '../../types/state';\nimport { ActionTypes } from '../../types/actions';\n\nexport const redirect: Middleware<unknown, State> =\n  (_store) => (next) => (action) => {\n    if (action.type === ActionTypes.RedirectToRoute) {\n      browserHistory.push(action.payload);\n    }\n\n    return next(action);\n  };\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { Provider } from 'react-redux';\nimport {configureStore} from '@reduxjs/toolkit';\nimport { createAPI } from './services/api';\nimport App from './components/app/app';\nimport { rootReducer } from './store/root-reducer';\nimport { requireAuthorization } from './store/actions';\nimport { AuthorizationStatus } from './const';\nimport { redirect } from './store/middlewares/redirect';\nimport { ToastContainer } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.css';\nimport 'react-loader-spinner/dist/loader/css/react-spinner-loader.css';\nimport { checkAuthAction } from './store/user/api-actions';\nimport { fetchFilmsAction } from './store/films/api-actions';\nimport {Router as BrowserRouter} from 'react-router-dom';\nimport browserHistory from './browser-history';\n\nconst api = createAPI(() =>\n  store.dispatch(requireAuthorization(AuthorizationStatus.NoAuth)),\n);\n\nconst store = configureStore({\n  reducer: rootReducer,\n  middleware: (getDefaultMiddleware) =>\n    getDefaultMiddleware({\n      thunk: {\n        extraArgument: api,\n      },\n    }).concat(redirect),\n});\n\n(store.dispatch)(checkAuthAction());\n(store.dispatch)(fetchFilmsAction());\n\nReactDOM.render(\n  <React.StrictMode>\n    <Provider store={store}>\n      <BrowserRouter history={browserHistory}>\n        <ToastContainer />\n        <App />\n      </BrowserRouter>\n    </Provider>\n  </React.StrictMode>,\n  document.getElementById('root'),\n);\n","import { ThunkActionResult } from '../../types/actions';\nimport {\n  loadFilmsSuccess,\n  loadFilmsRequest,\n  loadFilmsError\n} from '../actions';\nimport { APIRoute } from '../../const';\nimport { FilmsType } from '../../types/films';\nimport camelcaseKeys from 'camelcase-keys';\n\nexport const fetchFilmsAction =\n  (): ThunkActionResult => async (dispatch, _, api) => {\n    dispatch(loadFilmsRequest(true));\n\n    try {\n      const { data } = await api.get<FilmsType>(APIRoute.Films);\n      const normalizedData = data.map((film) => camelcaseKeys(film));\n\n      dispatch(loadFilmsSuccess(normalizedData));\n    } catch (e) {\n      dispatch(loadFilmsError());\n    } finally {\n      dispatch(loadFilmsRequest(false));\n    }\n  };\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"header\":\"error-screen_header__1Vt7c\",\"main-layout\":\"error-screen_main-layout__1RTBp\",\"text\":\"error-screen_text__O46_X\",\"link\":\"error-screen_link__1s1tm\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"reviewsWrap\":\"reviews_reviewsWrap__3X5ag\",\"reviewsText\":\"reviews_reviewsText__3y7lu\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"similarWrap\":\"movie-screen_similarWrap__1Y8gK\",\"similarText\":\"movie-screen_similarText__aV53o\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"title\":\"my-list-screen_title__32eMp\",\"noContentWrap\":\"my-list-screen_noContentWrap__1K2Ox\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"loaderWrap\":\"player-screen_loaderWrap__3wmfz\",\"reload\":\"player-screen_reload__n1zBI\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"link\":\"card_link__2T0D4\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrap\":\"loading-screen_wrap__1BiGu\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"btnDisabled\":\"sign-in_btnDisabled__YpGK3\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"resetButton\":\"tabs_resetButton__3ubv-\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrap\":\"comment-form_wrap__-ilVe\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"progress\":\"progress_progress__2YNAx\"};"],"sourceRoot":""}